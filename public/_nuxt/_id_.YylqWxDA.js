import{u as ee,S as T,h as ve,E as B,f as oe,D as ge,k as ke,B as W,P as he,j as we,d as be,e as Ce,_ as ye,a as xe,r as Ie,G as Le,l as $e}from"./entry.t-rqPOs0.js";import{a as Ee,_ as Se}from"./ElImage.MMEIiX96.js";import{_ as Te}from"./Switch.Td1bnJcn.js";import{E as Be}from"./tag.C0ahusY6.js";import{_ as Pe}from"./nuxt-link.AUBdcVxd.js";import{_ as Ue}from"./TagList.vue.OeOiiCEW.js";import{E as ze}from"./divider.Ixn223Qv.js";import{g as Ae,P as v,t as Oe,a as De}from"./post.az1H9mBx.js";import{j as te,a as P,k as Ne,I as se,ap as Ke,O as d,P as h,Q as n,Z as X,u as e,a6 as u,a5 as L,ab as Me,an as ae,ao as ne,b as Ve,aj as je,$ as l,a2 as c,a7 as I,ad as Fe,a8 as E,at as Re}from"./swiper-vue.Dj7aAS3P.js";import{_ as Ge}from"./CommentPreview.1tOtzHAm.js";import{_ as He}from"./UserPostTotal.vue.tWWZmSjH.js";import{_ as Qe}from"./SigninCard.vue.0TR8jjq9.js";import"./debounce.0E-5_dMF.js";import"./select.CPu1gYEQ.js";import"./popper.b7Al0Wsi.js";import"./scrollbar.VqFpSCdd.js";import"./strings.Y1vdtDWm.js";import"./isEqual.OSnr_sHV.js";import"./hasIn.6fummut8.js";import"./index.dh5FAeg5.js";import"./OssFileUpload.AYjrnYRm.js";import"./progress.FoUIz2xX.js";import"./index.keDQovFV.js";import"./AutoIncre.vue.cpfunnOh.js";import"./notification.YJSnxgg5.js";import"./index.uAaZKamD.js";/* empty css                */const Ye=r=>(ae("data-v-2053e54a"),r=r(),ne(),r),Ze={grid:"~ cols-3 gap-4 md:gap-6",class:"mx-a my-6 opacity-60 group-hover:opacity-100"},qe={class:"action-card"},Je={class:"action-card"},We={class:"action-btn flex-row-c-c hover:text-[var(--el-color-info)]"},Xe=Ye(()=>n("div",{class:"action-card"},[n("i",{class:"i-solar:share-broken p-1em transition-200 hover:i-solar:share-bold"})],-1)),eo=te({__name:"ActionList",props:{postId:{default:""},likes:{default:0},collect:{default:0}},emits:["submit"],setup(r,{emit:_}){const p=r,s=ee(),k=P(!1),$=Ne(()=>location?`${location.href}#post${p.postId}`:""),a=P({like:{value:p.likes,isLike:!1},collect:{value:p.collect,isCollect:!1}});function w(o=v.LIKE,t=1){let i="点赞";o===v.COLLECT&&(i="收藏"),t===0?ve.confirm(`是否取消${i}？`,"取消提示",{lockScroll:!1,confirmButtonText:"确 认",confirmButtonClass:"el-button--danger  border-default ",cancelButtonText:"取 消",center:!0,callback:async m=>{m==="confirm"&&b(i,p.postId,o,t)}}):b(i,p.postId,o,t)}async function b(o,t,i=v.LIKE,m=1){const{data:f,code:g}=await Oe(t,{postId:t,type:i},s.getToken);return g===T.SUCCESS&&(i===v.LIKE?(a.value.like.isLike=!!f,a.value.like.value+=m?1:-1):i===v.COLLECT&&(a.value.collect.isCollect=!!f,a.value.collect.value+=m?1:-1),f?B.success(`${o}成功！`):B.warning(`取消${o}成功！`)),f}return se(async()=>{if(k.value)return;k.value=!0;const{data:o,code:t}=await Ae(p.postId,{},s.getTokenFn());t===T.SUCCESS?(o.find(i=>i.type===v.LIKE)!==void 0&&(a.value.like.isLike=!0,a.value.like.value+=1),o.find(i=>i.type===v.COLLECT)!==void 0&&(a.value.collect.isCollect=!0,a.value.collect.value+=1)):(a.value.like.isLike=!1,a.value.collect.isCollect=!1),k.value=!1}),(o,t)=>{var m,f,g,C;const i=Ke("copying");return d(),h("div",Ze,[n("div",{class:"action-btn flex-row-c-c hover:text-[var(--el-color-danger)]",onClick:t[0]||(t[0]=S=>w(e(v).LIKE,e(a).like.isLike?0:1))},[n("div",qe,[n("i",{class:X(["p-1em transition-200",e(a).like.isLike?"hover:i-solar:like-broken i-solar:like-bold text-[var(--el-color-danger)]":"hover:i-solar:like-bold i-solar:like-broken"])},null,2)]),u(" "+L(((m=e(a))==null?void 0:m.like.value)>0?(f=e(a))==null?void 0:f.like.value:"点赞"),1)]),n("div",{class:"action-btn flex-row-c-c hover:text-[var(--el-color-warning)]",onClick:t[1]||(t[1]=S=>w(e(v).COLLECT,e(a).collect.isCollect?0:1))},[n("div",Je,[n("i",{class:X(["p-1em transition-200",e(a).collect.isCollect?"hover:i-solar:star-broken i-solar:star-bold text-[var(--el-color-warning)]":"hover:i-solar:star-bold i-solar:star-broken"])},null,2)]),u(" "+L(((g=e(a))==null?void 0:g.collect.value)>0?(C=e(a))==null?void 0:C.collect.value:"收藏"),1)]),Me((d(),h("div",We,[Xe,u(" 分享 ")])),[[i,e($),void 0,{toast:!0}]])])}}}),oo=oe(eo,[["__scopeId","data-v-2053e54a"]]),to=Re(()=>Ie(()=>import("./CateGoryLine.HAVaejXu.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url).then(r=>r.default||r)),so=r=>(ae("data-v-58ced6c4"),r=r(),ne(),r),ao={key:0},no={class:"group fixed left-0 top-0 z-0 h-30vh w-full shadow-md shadow-inset"},lo={relative:"","z-1":"","mt-26vh":"","min-h-100vh":"","w-full":"","bg-light":"","dark:bg-black":""},io={grid:"~ cols-1 md:cols-[4fr_1fr] md:gap-6","layout-default-md":"",style:{transform:"translateY(-2rem)"}},ro={"border-default":"","card-default":"",class:"block h-full border-0 border-t-1px p-4 md:p-6"},co={"w-full":"",flex:"","flex-col":"","grid-gap-4":""},mo={for:"content",class:"truncate border-0 border-b-1px py-6 border-default"},uo={class:"group flex items-center"},_o={flex:"","items-center":"","font-600":"","opacity-90":""},po={"ml-2":"","opacity-50":""},fo={key:1,"ml-a":""},vo={flex:"",truncate:"",grid:"~ gap-2"},go=so(()=>n("i",{"i-solar:crown-star-bold":"","mr-1":"","p-0.5em":""},null,-1)),ko={flex:"","flex-col":"","grid-gap-6":""},ho={key:1,class:"h-100vh w-full flex-row-c-c"},wo=te({__name:"[id]",setup(r){var w,b;const _=ee(),p=ge(),s=P(),k=(b=(w=p.params)==null?void 0:w.id)==null?void 0:b.toString();async function $(){const o=await De(`${p.params.id}`,_.getTokenFn());o.code===T.SUCCESS&&(s.value=o.data)}se(()=>{_.isLogin&&$()}),Ve(()=>_.isLogin,o=>{o&&$()}),ke({title:()=>{var o;return`${((o=s.value)==null?void 0:o.title)||"社区"} - ${Le}`},description:()=>{var o,t;return`极物圈 - ${(o=s.value)==null?void 0:o.title} - ${(t=s.value)==null?void 0:t.content}！`},keywords:$e});function a(o){B.warning("该功能未开放！")}return(o,t)=>{const i=Ee,m=Se,f=Te,g=be,C=Be,S=Pe,le=Ue,ie=je("v-md-preview"),re=ze,ce=oo,de=Ge,U=Ce,me=to,ue=He,_e=Qe,pe=ye,fe=xe;return d(),h("div",null,[l(fe,{name:"second",header:!1,menu:["back",{name:"home",isTeleport:!0}]},{default:c(()=>[l(U,null,{fallback:c(()=>[l(i,{class:"h-100vh w-full flex-row-c-c"})]),default:c(()=>{var z,A,O,D,N,K,M,V,j,F,R,G,H,Q,Y,Z,q,J;return[(z=e(_).userInfo)!=null&&z.id?(d(),h("main",ao,[n("div",no,[l(m,{src:("BaseUrlImg"in o?o.BaseUrlImg:e(W))+((A=e(s))==null?void 0:A.cover),class:"block h-full w-full overflow-hidden backdrop-blur-3",fit:"cover"},null,8,["src"]),l(f,{class:"absolute right-2rem top-2rem z-2 op-0 group-hover:op-100"})]),n("div",lo,[n("div",io,[n("section",ro,[n("div",co,[n("h1",mo,L((O=e(s))==null?void 0:O.title),1),n("div",uo,[n("small",_o,[l(m,{src:("BaseUrlImg"in o?o.BaseUrlImg:e(W))+((N=(D=e(s))==null?void 0:D.user)==null?void 0:N.avatar),class:"mr-2 h-1.8em w-1.8em rounded-1/2 object-cover shadow",fit:"cover"},null,8,["src"]),u(" "+L((M=(K=e(s))==null?void 0:K.user)==null?void 0:M.nickname),1)]),n("small",po,"发帖时间："+L((V=e(s))==null?void 0:V.createTime),1),((j=e(s))==null?void 0:j.userId)!==((F=e(_).userInfo)==null?void 0:F.id)?(d(),I(g,{key:0,type:"info",round:"",plain:"",class:"ml-a","icon-class":"i-tabler:plus mr-2","transition-icon":!0,size:"small",onClick:t[0]||(t[0]=Fe(y=>{var x;return e(_).getTokenFn()&&a((x=e(s))==null?void 0:x.userId)},["stop"]))},{default:c(()=>[u(" 关注 ")]),_:1})):(d(),h("div",fo,[l(C,{type:"info",effect:"dark",round:"",size:"small"},{default:c(()=>[u(" 本人 ")]),_:1}),l(S,{to:`/community/post/new?id=${e(k)}`,class:"ml-2 text-0.8rem"},{default:c(()=>[u(" 编辑 ")]),_:1},8,["to"])]))]),n("div",vo,[(R=e(s))!=null&&R.isEssence?(d(),I(C,{key:0,size:"small",class:"font-600 shadow",round:"",style:{padding:"0.2rem 0.4rem"},type:"warning",effect:"dark"},{default:c(()=>[go,u(" 精选 ")]),_:1})):E("",!0),l(le,{size:"small",round:"",tags:(G=e(s))==null?void 0:G.tags,effect:"light"},null,8,["tags"])]),(H=e(s))!=null&&H.content?(d(),I(ie,{key:0,"preview-class":"vuepress-markdown-body",text:(Q=e(s))==null?void 0:Q.content},null,8,["text"])):E("",!0),l(re,{style:{margin:"0.25rem 0",opacity:"0.5"}}),e(_).isLogin?(d(),I(ce,{key:1,"post-id":e(k),likes:(Y=e(s))==null?void 0:Y.likes},null,8,["post-id","likes"])):E("",!0)]),l(U,{fallback:"加载中"},{default:c(()=>{var y,x;return[l(de,{"post-id":`${(x=(y=o._.provides[he]||o.$route)==null?void 0:y.params)==null?void 0:x.id}`,dto:{isNew:("isTrue"in o?o.isTrue:e(we)).TRUE}},null,8,["post-id","dto"])]}),_:1})]),n("section",ko,[l(me,{class:"p-4 border-default card-default md:p-6","post-id":e(k)},null,8,["post-id"]),(Z=e(s))!=null&&Z.user?(d(),I(ue,{key:0,dto:{userId:(q=e(s))==null?void 0:q.userId},user:(J=e(s))==null?void 0:J.user,"grid-class":"grid grid-cols-4 gap-4","card-class":"truncate word-nowrap text-0.85rem",class:"p-4 border-default card-default"},null,8,["dto","user"])):E("",!0),l(_e,{class:"p-4 border-default card-default md:p-6"})])])])])):(d(),h("main",ho,[l(pe,{msg:"未登录,请登录后查看!",icon:"i-solar:eye-line-duotone w-8rem h-8rem animate-[0.2s_fade-in_3]"},{footer:c(()=>[l(g,{plain:"",onClick:t[1]||(t[1]=y=>o.$router.back())},{default:c(()=>[u(" 返 回 ")]),_:1}),l(g,{"icon-class":"i-solar:user-rounded-outline mr-2",class:"hover:shadow-md",type:"primary","transition-icon":"",onClick:t[2]||(t[2]=y=>e(_).showLoginForm=!0)},{default:c(()=>[u(" 登 录 ")]),_:1})]),_:1})]))]}),_:1})]),_:1})])}}}),Yo=oe(wo,[["__scopeId","data-v-58ced6c4"]]);export{Yo as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./CateGoryLine.HAVaejXu.js","./ElImage.MMEIiX96.js","./swiper-vue.Dj7aAS3P.js","./swiper-vue.CRufKKKm.css","./entry.t-rqPOs0.js","./entry.k6-BttGb.css","./debounce.0E-5_dMF.js","./ElImage.dg4y3aGk.css","./nuxt-link.AUBdcVxd.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
