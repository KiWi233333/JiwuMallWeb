import{u as L,v as O,d as B,_ as M,e as y,f as b,x as w}from"./entry.HuYbGiLS.js";import{_ as N,a as P}from"./Footer.HKpec9o-.js";import{_ as V}from"./PreLoading.vue.RcEKquDI.js";import{u as z,W as h}from"./useWs.6oZqrKhZ.js";import{j as C,a as D,b as H,W as T,ao as W,L as l,M as m,Z as n,a0 as a,N as d,u as i,U as g,a9 as F,a5 as S,a4 as x,am as R,an as A,a6 as U,at as $}from"./swiper-vue.4ZhlhtKr.js";import{u as q}from"./useToggleThemeAnima.rqlolBiN.js";import"./nuxt-link.eZ5kOSgI.js";import"./kiwi_strong.4i0rfJn6.js";import"./scrollbar.ylZGouLy.js";import"./index.Uhk89Gac.js";import"./popper.TZrEXPn8.js";import"./isUndefined.IZwZ21d-.js";/* empty css                */import"./Switch.CiJ5_qW7.js";import"./composables.QNi8Zuou.js";import"./category.sBcSORba.js";import"./fetch.3IR0ILJ_.js";const j=e=>(R("data-v-c33b044f"),e=e(),A(),e),Z={class:"main-box"},G=j(()=>d("div",{class:"hidden h-80vh w-2/7 truncate p-4 md:block"},null,-1)),J={key:0,class:"main-box"},K={key:1,class:"main-box flex-row-c-c"},Q={key:2,class:"main-box flex-row-c-c"},X=C({__name:"Layout",setup(e){const c=L(),t=z(),r=D();H(()=>c.getToken,s=>{var o;s?_():(o=t.webSocketHandler)==null||o.close()},{immediate:!0,deep:!0});function _(){t.initDefault(s=>{r.value=setInterval(()=>{t.status===h.CLOSE?(clearInterval(r.value),r.value=null,_()):t.sendHeart()},1e4),t.onMessage(()=>{})})}const p=O();return T(()=>{var s;p.path.startsWith("/chat")||(clearInterval(r.value),t.webSocketHandler&&((s=t.webSocketHandler)==null||s.close()),r.value=!1)}),(s,o)=>{const f=V,u=B,v=M,E=y,I=W("auth");return l(),m("div",null,[n(E,null,{fallback:a(()=>[d("div",Z,[G,n(f,{class:"h-80vh flex-row-c-c flex-1 border-0 border-l-1px op-60 border-default bg-color"})])]),default:a(()=>[i(c).getToken&&i(t).status===i(h).OPEN?(l(),m("div",J,[g(s.$slots,"default",{},void 0,!0)])):i(t).status!==i(h).OPEN?(l(),m("div",K,[n(v,{msg:"服务连接失败，请重试",icon:"i-solar:eye-line-duotone w-8rem h-8rem animate-[0.2s_fade-in_3]"},{footer:a(()=>[F((l(),S(u,{"icon-class":"i-solar:refresh-outline mr-2",class:"hover:shadow-md",type:"primary","transition-icon":"",onClick:o[0]||(o[0]=k=>_())},{default:a(()=>[x(" 重新连接 ")]),_:1})),[[I]])]),_:1})])):(l(),m("div",Q,[n(v,{msg:"未登录,请登录后查看!",icon:"i-solar:eye-line-duotone w-8rem h-8rem animate-[0.2s_fade-in_3]"},{footer:a(()=>[n(u,{plain:"",onClick:o[1]||(o[1]=k=>s.$router.back())},{default:a(()=>[x(" 返 回 ")]),_:1}),n(u,{"icon-class":"i-solar:user-rounded-outline mr-2",class:"hover:shadow-md",type:"primary","transition-icon":"",onClick:o[2]||(o[2]=k=>i(c).showLoginForm=!0)},{default:a(()=>[x(" 登 录 ")]),_:1})]),_:1})]))]),_:3})])}}}),Y=b(X,[["__scopeId","data-v-c33b044f"]]),ee=$(()=>w(()=>import("./ChatMenu.xQvC1zMv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]),import.meta.url).then(e=>e.default||e)),te=$(()=>w(()=>import("./index.9Jiqo2G6.js"),__vite__mapDeps([19,2,3,4,5,1,20,21,22,23,24,25,26,27,28,16,29,30,31,32,8,9,10,33,34,18]),import.meta.url).then(e=>e.default||e)),oe={class:"flex"},ne=C({__name:"chat",props:{footer:{type:Boolean,default:!0,required:!1},menu:{default:["back","home"],required:!1}},setup(e){const c=q();return(t,r)=>{const _=y,p=N,s=ee,o=Y,f=te,u=P;return l(),m("div",null,[n(p,{class:"sticky left-0 top-0 z-1001 max-w-100vw"},{pre:a(()=>[n(_,null,{default:a(()=>[d("span",{class:"i-solar:hamburger-menu-outline mx-2 p-3","cursor-pointer":"",onClick:r[0]||(r[0]=v=>i(c).isChatFold=!i(c).isChatFold)})]),_:1})]),_:1}),d("div",oe,[n(s),n(o,{class:"flex-row-c-c flex-1"},{default:a(()=>[g(t.$slots,"default",{},void 0,!0)]),_:3})]),n(f,{menu:e.menu},null,8,["menu"]),e.footer?(l(),S(u,{key:0})):U("",!0)])}}}),be=b(ne,[["__scopeId","data-v-be84a706"]]);export{be as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./ChatMenu.xQvC1zMv.js","./nuxt-link.eZ5kOSgI.js","./entry.HuYbGiLS.js","./swiper-vue.4ZhlhtKr.js","./swiper-vue.CRufKKKm.css","./entry.NyAeeWMW.css","./menu.ywxIxKVg.js","./index.g79XymgM.js","./popper.TZrEXPn8.js","./isUndefined.IZwZ21d-.js","./popper.nTJkgMH4.css","./index.O6n8D2HD.js","./menu.6YbFhd-D.css","./useToggleThemeAnima.rqlolBiN.js","./category.sBcSORba.js","./fetch.3IR0ILJ_.js","./composables.QNi8Zuou.js","./ChatMenu.VfIZrCl9.css","./tooltip.f0mNRiTD.css","./index.9Jiqo2G6.js","./Main.vue.pw_WhY3f.js","./ElImage.H3VTC2Vd.js","./PreLoading.vue.RcEKquDI.js","./debounce.4-I_Xkye.js","./ElImage.Pw9gT8La.css","./tag.Q9i6oaRN.js","./tag.WI6po7qa.css","./contact.IOrl_V-3.js","./useWs.6oZqrKhZ.js","./Main.hykRw3Sn.css","./scrollbar.ylZGouLy.js","./scrollbar.Smf0pYfu.css","./index.Uhk89Gac.js","./index.DVCFg7db.css","./popover.LAISAeEG.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
