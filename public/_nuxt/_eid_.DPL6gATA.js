import{_ as Z}from"./ElImage.MMEIiX96.js";import{E as H}from"./tag.C0ahusY6.js";import{B as M,L as $,f as J,D as K,n as W,k as X,a as Y}from"./entry.t-rqPOs0.js";import{j as O,k,O as n,P as v,Q as t,$ as y,u as a,a7 as A,a2 as I,a6 as w,a5 as r,a8 as B,an as tt,ao as et,au as D,aj as at,Z as st,ab as q,ac as G,a0 as ot,as as lt}from"./swiper-vue.Dj7aAS3P.js";import{_ as rt}from"./nuxt-link.AUBdcVxd.js";import{g as dt}from"./index.c-u92hz9.js";import"./debounce.0E-5_dMF.js";const nt=i=>(tt("data-v-9f846494"),i=i(),et(),i),it={class:"group goods-card aspect-ratio-1 w-full flex flex-col cursor-pointer border-gray-200 rounded-4px shadow-sm border-default dark:border-dark-200 dark:bg-dark-8"},ct={class:"img relative h-120px w-full overflow-hidden rounded-t-inherit md:h-160px"},ut={class:"absolute right-2 top-2"},mt={class:"view absolute bottom-0 left-0 z-1 w-full flex-row-bt-c bg-[var(--el-bg-color-primary)] px-3 py-1 color-light opacity-0 backdrop-blur-2em transition-300","group-hover:opacity-80":""},_t=nt(()=>t("i",{class:"i-solar:eye-bold mr-1 p-2"},null,-1)),pt={class:"texts relative flex flex-col justify-between justify-around px-2 py-2 md:px-3"},ht={class:"w-full truncate"},ft={class:"my-1 text-0.8em opacity-80"},vt={"float-right":""},gt={class:"flex items-end color-[var(--el-color-danger)]"},xt={"pr-1":""},yt={hidden:"","text-0.8em":"","color-coolgray":"","md:inline":"",style:{"text-decoration":"line-through"}},wt=O({__name:"GoodsEvent",props:{data:{}},setup(i){const{data:d}=i,c=k(()=>d.warrantyTime?`${d.warrantyTime}天无理由 `:`${d.refundTime}`?`${d.refundTime}天保修 `:" ");return(e,b)=>{var m,_,p,h,f,s;const o=Z,g=H;return n(),v("div",it,[t("div",ct,[y(o,{loading:"lazy",class:"h-full w-full",src:("BaseUrlImg"in e?e.BaseUrlImg:a(M))+((m=e.data)!=null&&m.image?(_=e.data)==null?void 0:_.image:(h=(p=e.data)==null?void 0:p.images)==null?void 0:h.split(",")[0]),alt:e.data.name,fit:"cover"},null,8,["src","alt"]),t("div",ut,[(f=e.data)!=null&&f.price&&((s=e.data)!=null&&s.eventPrice)?(n(),A(g,{key:0,type:"danger",effect:"dark","rounded-3px":"",style:{"letter-spacing":"0.1em"}},{default:I(()=>{var l,x;return[w(" -￥"+r(a($)((l=e.data)==null?void 0:l.price).subtract((x=e.data)==null?void 0:x.eventPrice)),1)]}),_:1})):B("",!0)]),t("small",mt,[t("div",null,[_t,w(" "+r(e.data.views),1)]),t("div",null," 销量： "+r(e.data.sales),1)])]),t("div",pt,[t("h4",ht,r(e.data.name),1),t("p",ft,[t("small",null,r(e.data.city?`${e.data.city}发货 `:""),1),t("small",vt,r(a(c)),1)]),t("p",gt,[t("strong",xt,"￥"+r(a($)(e.data.eventPrice)),1),t("small",yt," ￥"+r(a($)(e.data.price)),1)])])])}}}),bt=J(wt,[["__scopeId","data-v-9f846494"]]),$t={key:0,class:"layout-default"},kt={class:"mx-a min-h-100vh w-full flex flex-col rounded-10px p-4 shadow md:w-80% v-card"},It={class:"bg absolute relative left-0 h-300px w-full overflow-hidden rounded-t-10px"},Bt=["src"],Tt={absolute:"","left-0":"","top-0":"","backdrop-blur-20px":"",class:"z-1 h-full w-full flex-row-c-c flex-col leading-1.2em text-shadow-lg"},Et={"text-light":"",class:"mt-4 cursor-pointer text-center tracking-1 transition-300 hover:scale-106 md:text-3xl"},St={class:"my-2 text-[var(--el-color-info)]"},Nt={class:"opacity-60"},Ct={class:"opacity-60"},jt={class:"list min-h-80vh flex-1 pb-6"},Ut=t("h3",{"my-6":"","border-l-0":"","border-r-0":"","py-4":"","text-center":"","border-default":""}," 活动商品 ",-1),zt={grid:"~ cols-2 md:cols-4 gap-4 md:gap-6"},Lt={class:"w-full flex-row-c-c flex-1 text-center"},Pt={key:0},Ft=O({__name:"[eid]",async setup(i){var _,p,h,f;let d,c;const e=K(),b=(_=e.params)!=null&&_.eid?(p=e.params)==null?void 0:p.eid.toString():"",o=([d,c]=D(()=>dt(b||"")),d=await d,c(),d);(!b||!((f=(h=o.data.value)==null?void 0:h.data)!=null&&f.id))&&([d,c]=D(()=>W({replace:!0,path:"/error",query:{errorMsg:"活动未开始或结束 ❌"}})),await d,c());const g=k(()=>{var s;return((s=o.data.value)==null?void 0:s.data.list.length)===0});X({title:()=>{var s,l;return`${((l=(s=o.data.value)==null?void 0:s.data)==null?void 0:l.title)||""} - 极物圈`},description:()=>{var s,l;return((l=(s=o.data.value)==null?void 0:s.data)==null?void 0:l.details)||""}});const m=k(()=>{var s,l;return((s=o.data.value)==null?void 0:s.data.status)===-1?{title:"已结束",class:"text-light bg-[var(--el-color-danger)]"}:((l=o.data.value)==null?void 0:l.data.status)===0?{title:"未开始",class:"text-light bg-[var(--el-color-info)]"}:{title:"进行中",class:"text-light bg-[var(--el-color-info)]"}});return(s,l)=>{const x=bt,F=rt,Q=at("v-md-preview"),R=Y;return n(),v("div",null,[y(R,{name:"main","left-menu":!1,header:!1,menu:["home","back","service"]},{default:I(()=>{var T,E,S,N,C,j,U,z,L,P,V;return[(E=(T=a(o).data.value)==null?void 0:T.data)!=null&&E.id?(n(),v("div",$t,[t("div",kt,[t("div",It,[t("img",{src:("BaseUrlImg"in s?s.BaseUrlImg:a(M))+((S=a(o).data.value)==null?void 0:S.data.images),class:"h-full w-full",style:{"object-fit":"cover"},crossOrigin:"anonymous"},null,8,Bt),t("div",Tt,[t("h3",{"text-light":"",class:st(["tip absolute right-0 top-0 w-8em translate-x-10 translate-y-5 rotate-45 p-2 text-center",a(m).class]),"border-t":"2px dashed light","border-b":"2px dashed light"},r(a(m).title),3),t("h2",Et,r((N=a(o).data.value)==null?void 0:N.data.title),1),t("small",St,[w(" 活动时间： "),t("small",Nt,r((C=a(o).data.value)==null?void 0:C.data.startTime),1),w(" ~ "),t("small",Ct,r((j=a(o).data.value)==null?void 0:j.data.endTime),1)])])]),q(t("section",jt,[Ut,t("div",zt,[(n(!0),v(ot,null,lt((U=a(o).data.value)==null?void 0:U.data.list,u=>(n(),A(F,{key:u==null?void 0:u.id,to:{path:`/goods/detail/${u.goodsId}`,query:{eventId:u.eventId}}},{default:I(()=>[y(x,{data:u},null,8,["data"])]),_:2},1032,["to"]))),128))])],512),[[G,!a(g)]]),q(t("div",Lt," 暂无活动商品 ",512),[[G,a(g)]]),(L=(z=a(o).data.value)==null?void 0:z.data)!=null&&L.details?(n(),v("section",Pt,[y(Q,{text:(V=(P=a(o).data.value)==null?void 0:P.data)==null?void 0:V.details,"preview-class":"vuepress-markdown-body"},null,8,["text"])])):B("",!0)])])):B("",!0)]}),_:1})])}}});export{Ft as default};
