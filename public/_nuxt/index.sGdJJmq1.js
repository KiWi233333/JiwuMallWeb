import{v as de,b as ue,s as me,E as q,c as ce,h as pe,d as A,e as _e,a as fe,x as H,f as ve}from"./entry.HuYbGiLS.js";import{E as ge}from"./checkbox.yoNbs0Nb.js";import{E as he,a as be}from"./select.Bh0wcPP9.js";import{E as ye}from"./tag.Q9i6oaRN.js";import{j as xe,a as m,r as we,k as L,L as x,M as N,Z as o,a0 as n,N as r,u as t,x as w,ai as ke,a4 as f,X as K,a3 as k,_ as Ee,ar as Ve,a5 as Se,a9 as F,aa as G,a6 as ze,at as W,am as Ce,an as Ie}from"./swiper-vue.4ZhlhtKr.js";import{E as Le,a as Ne}from"./tabs.hIqoD_La.js";import{E as Pe}from"./empty.TrNGK8ww.js";import"./scrollbar.ylZGouLy.js";import"./popper.TZrEXPn8.js";import"./isEqual.gU3elsgQ.js";import"./hasIn.gQarB0Dl.js";import"./flatten.lVx7POvc.js";import"./strings.PBHHvk2X.js";import"./debounce.4-I_Xkye.js";import"./index.O6n8D2HD.js";import"./index.gOl6WcbK.js";import"./isUndefined.IZwZ21d-.js";const Te=W(()=>H(()=>import("./GoodsList.d74h-xDM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url).then(i=>i.default||i)),Be=W(()=>H(()=>import("./PostList.07SR4KqT.js"),__vite__mapDeps([15,2,3,4,5,6,7,8,9,12,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,13,36,37,38,39,10,40]),import.meta.url).then(i=>i.default||i)),P=i=>(Ce("data-v-87455719"),i=i(),Ie(),i),Ue={class:"mt-10 layout-default",grid:"~ cols-1 md:cols-[1fr_4fr_1fr]"},Oe=P(()=>r("div",{class:"left sticky top-6rem"},null,-1)),$e={"min-h-80vh":"",flex:"","flex-col":"","justify-start":""},Re=P(()=>r("header",{class:"group mb-2rem flex-row-c-c cursor-pointer text-center text-2rem tracking-0.4em"},[r("i",{class:"i-solar:magnifer-outline mr-4 inline-block transform-origin-[right_bottom] text-0.6em transition-200 transition-all group-hover:-rotate-10"}),f(" 搜索 ")],-1)),De={class:"h-2.6rem w-1/1 flex-row-c-c"},Me={class:"mt-3 flex items-start md:h-2rem"},je={"pr-0.3em":""},qe={key:0,"min-h-80vh":"","animate-fade-in":""},Ae=P(()=>r("div",{class:"right sticky top-6rem"},null,-1)),Ke=xe({__name:"index",setup(i){var T,B,U,O,$,R;const E=m("goods"),V=de(),p=m(!0),S=m(!1),d=m(((B=(T=V.query)==null?void 0:T.name)==null?void 0:B.toString())||""),_=m(!1),v=m(),g=m(),a=we({name:(O=(U=V.query)==null?void 0:U.name)==null?void 0:O.toString(),cid:(R=($=V.query)==null?void 0:$.cid)==null?void 0:R.toString(),isPostage:void 0,priceSort:void 0,viewsSort:void 0,saleSort:void 0,isNew:void 0}),u=ue("jiwu_index_search",[]),z=L({get(){return!!a.isNew},set(s){a.isNew=+s||void 0}}),C=L({get(){return!!a.isPostage},set(s){a.isPostage=+s||void 0}});function h(s="goods"){if(S.value)return q.warning("搜索太频繁了");if(!d.value)return q.warning("请输入关键词");const e=u.value.includes(d.value);return!e&&u.value.length<=8?u.value.unshift(d.value.trim()):e&&u.value.pop(),a.name=d.value,S.value=!0,setTimeout(()=>(S.value=!1,p.value=!0,Promise.resolve()),500)}function X(s){u.value.splice(u.value.indexOf(s),1)}m(!1);function Z(){p.value=!1,a.cid=void 0,a.name=void 0,a.isPostage=void 0,a.priceSort=void 0,a.viewsSort=void 0,a.saleSort=void 0,a.isNew=void 0,d.value=""}function J(s){u.value.push(s),d.value=s,h()}const Q=L(()=>{var s,e,b,y;return`${((e=(s=v==null?void 0:v.value)==null?void 0:s.pageInfo)==null?void 0:e.total)||"0"}个商品, ${((y=(b=g==null?void 0:g.value)==null?void 0:b.pageInfo)==null?void 0:y.total)||"0"}条帖子`});return(s,e)=>{const b=ce,y=pe,D=ge,c=he,I=be,Y=A,ee=A,oe=ye,M=_e,te=Te,j=Le,ae=Be,le=Ne,se=Pe,ne=fe;return x(),N("div",null,[o(ne,{name:"main",header:!1,"left-menu":!1,menu:["shopcart","back"]},{default:n(()=>[o(M,null,{default:n(()=>[r("div",Ue,[Oe,r("div",$e,[Re,r("div",De,[o(b,{modelValue:t(d),"onUpdate:modelValue":e[0]||(e[0]=l=>w(d)?d.value=l:null),modelModifiers:{trim:!0},clearable:"","input-style":"border-radius:1rem;height:2.6rem;font-size:1rem;",type:"text",size:"large",class:"shadow-sm",autocomplete:"off","prefix-icon":"ElIconSearch"in s?s.ElIconSearch:t(me),minlength:"2",maxlength:"30","on-search":h,placeholder:"搜索关键字帖子、商品...",onKeyup:ke(h,["enter"])},null,8,["modelValue","prefix-icon"]),o(y,{type:"info","shadow-md":"",style:{width:"10em",height:"100%","font-size":"1.2rem","margin-left":"1em"},size:"large",onClick:e[1]||(e[1]=l=>h())},{default:n(()=>[f(" 搜 索 ")]),_:1})]),r("div",Me,[r("div",{class:K([{"h-6rem md:h-3rem":t(_)},"grid grid-cols-4 h-0 flex-1 gap-2 overflow-hidden opacity-80 transition-300 transition-height md:grid-cols-8"])},[o(D,{modelValue:t(z),"onUpdate:modelValue":e[2]||(e[2]=l=>w(z)?z.value=l:null),class:"rounded-4px bg-white px-2 border-default dark:bg-dark-5",label:"新品",style:{margin:"0"}},null,8,["modelValue"]),o(D,{modelValue:t(C),"onUpdate:modelValue":e[3]||(e[3]=l=>w(C)?C.value=l:null),class:"rounded-4px bg-white px-2 border-default dark:bg-dark-5",label:"免运费",style:{margin:"0"}},null,8,["modelValue"]),o(I,{modelValue:t(a).saleSort,"onUpdate:modelValue":e[4]||(e[4]=l=>t(a).saleSort=l),size:"default",placeholder:"销量排序"},{default:n(()=>[o(c,{label:"销量升序",value:0}),o(c,{label:"销量降序",value:1})]),_:1},8,["modelValue"]),o(I,{modelValue:t(a).priceSort,"onUpdate:modelValue":e[5]||(e[5]=l=>t(a).priceSort=l),size:"default",placeholder:"价格排序"},{default:n(()=>[o(c,{label:"价格升序",value:0}),o(c,{label:"价格降序",value:1})]),_:1},8,["modelValue"]),o(I,{modelValue:t(a).viewsSort,"onUpdate:modelValue":e[6]||(e[6]=l=>t(a).viewsSort=l),size:"default",placeholder:"浏览量排序"},{default:n(()=>[o(c,{label:"浏览量升序",value:0}),o(c,{label:"浏览量降序",value:1})]),_:1},8,["modelValue"]),o(Y,{"icon-class":"i-solar:refresh-outline mr-2","transition-icon":"",onClick:Z},{default:n(()=>[f(" 重置 ")]),_:1})],2),o(ee,{border:"false",plain:"",class:"z-8","icon-class":"i-solar:hamburger-menu-line-duotone ml-2 order-2",style:{"box-shadow":"none",border:"none","background-color":"transparent"},onClick:e[7]||(e[7]=l=>_.value=!t(_))},{default:n(()=>[f(k(t(_)?"收起":"筛选"),1)]),_:1})]),o(M,null,{fallback:n(()=>[f(" 历史加载中... ")]),default:n(()=>[r("div",{class:K(["flex flex-nowrap cursor-pointer items-center overflow-hidden py-1 transition-200 transition-margin",t(_)?"mt-0":"-mt-2.5rem"])},[(x(!0),N(Ee,null,Ve(t(u),(l,re)=>(x(),Se(oe,{key:l+re,size:"large",closable:"",class:"mr-1 mt-2 transition-300",onClose:ie=>X(l),onClick:ie=>J(l)},{default:n(()=>[r("span",je,k(l),1)]),_:2},1032,["onClose","onClick"]))),128))],2)]),_:1}),F(r("small",{"my-2":"","opacity-80":""},k("搜索结果")+" "+k(t(Q)),513),[[G,t(p)]]),F(o(le,{modelValue:t(E),"onUpdate:modelValue":e[8]||(e[8]=l=>w(E)?E.value=l:null),class:"min-h-50vh","tab-position":"top"},{default:n(()=>[o(j,{lazy:"",class:"zoom-in",name:"goods",label:"商 品"},{default:n(()=>[o(te,{ref_key:"goodsListRef",ref:v,class:"grid grid-cols-2 grid-gap-4 md:grid-cols-4",dto:t(a)},null,8,["dto"])]),_:1}),o(j,{name:"post",label:"帖 子",class:"zoom-in"},{default:n(()=>[o(ae,{ref_key:"postListRef",ref:g,dto:t(a),class:"grid grid-gap-4"},null,8,["dto"])]),_:1})]),_:1},8,["modelValue"]),[[G,t(p)]]),t(p)?ze("",!0):(x(),N("div",qe,[o(se,{"image-size":180,class:"mt-10em",description:"期待你的搜索 ✨"})]))]),Ae])]),_:1})]),_:1})])}}}),io=ve(Ke,[["__scopeId","data-v-87455719"]]);export{io as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./GoodsList.d74h-xDM.js","./index.tpBqOViH.js","./ElImage.H3VTC2Vd.js","./PreLoading.vue.RcEKquDI.js","./swiper-vue.4ZhlhtKr.js","./swiper-vue.CRufKKKm.css","./entry.HuYbGiLS.js","./entry.NyAeeWMW.css","./debounce.4-I_Xkye.js","./ElImage.Pw9gT8La.css","./fetch.3IR0ILJ_.js","./index.8uyA1Q9v.css","./nuxt-link.eZ5kOSgI.js","./AutoIncre.vue.KpzenuDu.js","./GoodsList.1p6fEF-7.css","./PostList.07SR4KqT.js","./tag.Q9i6oaRN.js","./tag.WI6po7qa.css","./TagList.vue.OYkBucBE.js","./CommentPreview.Y9bM1KWX.js","./select.Bh0wcPP9.js","./popper.TZrEXPn8.js","./isUndefined.IZwZ21d-.js","./popper.nTJkgMH4.css","./scrollbar.ylZGouLy.js","./scrollbar.Smf0pYfu.css","./strings.PBHHvk2X.js","./isEqual.gU3elsgQ.js","./hasIn.gQarB0Dl.js","./index.O6n8D2HD.js","./select.AFHHgGgH.css","./OssFileUpload.5SsdOgf4.js","./progress.UYU20Rtn.js","./progress.rXLlm_9F.css","./index.Rr0j-bh8.js","./OssFileUpload.IyigP3Lv.css","./notification.mMgfY760.js","./notification.8O_B6xHM.css","./CommentPreview.JFJ3T4Gg.css","./post.vbJ-6447.js","./PostList.VdmOiOO0.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
