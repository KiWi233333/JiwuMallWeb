import{E as M}from"./avatar.-bRo_r6d.js";import{u as $,B as I,t as A,E as c,S as P,g as V,av as R,a7 as w,l as F,b8 as O,h as X,e as Z,f as q}from"./entry.HuYbGiLS.js";import{E as G}from"./upload.0ACO-yOs.js";import{_ as H}from"./nuxt-link.eZ5kOSgI.js";import{E as J}from"./index.Uhk89Gac.js";import"./progress.UYU20Rtn.js";import"./popper.TZrEXPn8.js";/* empty css                */import{j as K,a as f,k as Q,ao as W,L as l,M as p,Z as r,a0 as t,u as a,a3 as m,N as s,a4 as g,a9 as Y,a5 as B,_ as ee,X as ae,ar as oe,am as se,an as te}from"./swiper-vue.4ZhlhtKr.js";import"./cloneDeep.3YksgvLn.js";import"./isEqual.gU3elsgQ.js";import"./isUndefined.IZwZ21d-.js";const h=u=>(se("data-v-4c9e1b2e"),u=u(),te(),u),re={class:"user-card","flex-row-c-c":"","cursor-pointer":""},ne={"flex-row-c-c":""},le=h(()=>s("span",{"i-solar:user-bold":"",style:{width:"60%",height:"60%"}},null,-1)),ie={"pl-2":"",class:"hidden md:block"},ce={"w-7em":"","tracking-1px":"",class:"... overflow-hidden truncate"},ue={"opacity-80":"",class:"group overflow-hidden truncate p-0 decoration-dashed hover:underline"},de=h(()=>s("span",{class:"p2 opacity-0 transition-300 group-hover:opacity-80","i-solar:copy-bold-duotone":""},null,-1)),pe=h(()=>s("div",{class:"top","p-10":""},null,-1)),me={class:"popup"},_e=["src","alt"],fe={class:"bottom","flex-col":""},ge={class:"title","py-2":""},he={grid:"","grid-cols-3":"","mb-2":"","justify-around":"","grid-gap-2":""},ve={"mt-2":""},be={class:"btn","flex-row-bt-c":"","pt-4":""},ye=K({__name:"UserLine",setup(u){const o=$(),k=new FormData,v=f(),_=Q({get(){return o.userInfo.avatar},set(e){o.userInfo.avatar=e}}),U=f(["image/png","image/jpg","image/jpeg","image/svg"]),E=e=>{if(U.value.includes(e.type)){if(e.size/1024/1024>2)return c.error("头像需要小于2MB!"),!1}else return c.error("文件格式不是图片格式!"),!1;return k.append("file",e),!0},N=async e=>{var n;(n=v.value)==null||n.clearFiles(),e.code===P.SUCCESS?(o.userInfo.avatar=e.data,_.value=e.data||"",c.success("更换头像成功！")):c.error(e.message)};function S(){V.confirm("是否确认退出登录？","退出登录",{confirmButtonText:"确认退出",lockScroll:!1,cancelButtonText:"取消",type:"warning"}).then(()=>{o.onUserExit(o.token);const e=R(),n=w(),i=w();e==null||e.$reset(),n==null||n.$reset(),i==null||i.$reset(),c.success("退出成功！")}).catch(()=>{})}const x=f([{name:"个人主页",path:"/user/info",className:"bg-[var(--el-color-primary)] i-solar:home-2-bold-duotone  group-hover:animate-[tada_1s_ease]"},{name:"我的帖子",path:"/user/post",className:"i-solar:cup-hot-bold-duotone bg-[var(--el-color-info)] group-hover:animate-[spin_300ms]"},{name:"我的收藏",path:"/user/collect",className:"bg-yellow-5 i-solar:star-bold-duotone  group-hover:animate-[bounce_0.5s_ease]"},{name:"钱 包",path:"/user/wallet",className:"bg-red-5 i-solar:wallet-bold-duotone  group-hover:scale-110"},{name:"购物车",path:"/user/shopcart",className:"bg-red-5 i-solar:cart-large-2-bold-duotone group-hover:animate-[shopcart_1s_ease-out]"},{name:"收货地址",path:"/user/address",className:"bg-lime-5 i-solar:compass-bold-duotone group-hover:animate-spin"},{name:"账 单",path:"/user/wallet",className:"bg-yellow-5  i-solar:bill-list-bold-duotone group-hover:animate-[tada_1s_ease-in-out_1]"},{name:"订 单",path:"/order/list",className:"bg-yellow-5 i-solar:clipboard-bold-duotone group-hover:animate-[swing_1s_ease_1]"},{name:"账户安全",path:"/user/safe",className:"bg-green-5 i-solar:danger-bold-duotone group-hover:rotate-360"}]);return(e,n)=>{const i=M,C=F,z=O,L=G,b=H,y=X,D=J,T=Z,j=W("copying");return l(),p("div",re,[r(T,null,{default:t(()=>[r(D,{transition:"fade",teleported:!1,style:{"transform-origin":"right top"},placement:"bottom",offset:20,width:320,trigger:"hover"},{reference:t(()=>[s("div",ne,[r(C,{"is-dot":!a(o).userInfo.avatar||a(o).userInfo.avatar==="default.png",class:"item mr-2 rounded-10em border-default"},{default:t(()=>[r(i,{src:!a(o).userInfo.avatar||a(o).userInfo.avatar==="default.png"?"":("BaseUrlImg"in e?e.BaseUrlImg:a(I))+a(o).userInfo.avatar,class:"hovers border-default"},{default:t(()=>[le]),_:1},8,["src"])]),_:1},8,["is-dot"]),s("div",ie,[s("h4",ce,m(a(o).userInfo.nickname||"未填写昵称"),1),Y((l(),p("small",ue,[g(" ID:"+m(a(o).userInfo.id)+" ",1),de])),[[j,a(o).userInfo.id,void 0,{toast:!0}]])])])]),default:t(()=>[pe,s("div",me,[r(L,{ref_key:"avatatRef",ref:v,class:"avatar-uploader",style:{width:"100%",height:"100%","border-radius":"50%"},drag:"",action:`${"BaseUrl"in e?e.BaseUrl:a(A)}/user/info/avatar`,headers:{Authorization:a(o).token},method:"PUT",limit:1,multiple:!1,"auto-upload":!0,"show-file-list":!1,"list-type":"picture","before-upload":E,"on-success":N},{default:t(()=>[a(_)?(l(),p("img",{key:0,loading:"lazy","h-6em":"","w-6em":"",src:("BaseUrlImg"in e?e.BaseUrlImg:a(I))+a(_),alt:a(o).userInfo.nickname,class:"avatar"},null,8,_e)):(l(),B(z,{key:1,size:"2em"}))]),_:1},8,["action","headers"]),s("div",fe,[s("h3",ge,m(a(o).userInfo.nickname),1),s("div",he,[(l(!0),p(ee,null,oe(a(x),d=>(l(),B(b,{key:d.path,class:"group v-card",to:d.path},{default:t(()=>[s("p",{class:ae(["icon transition-200 group-hover:bg-light",d.className])},null,2),s("p",ve,m(d.name),1)]),_:2},1032,["to"]))),128))]),s("div",be,[r(y,{size:"large",type:"danger",plain:"","ml-3":"",onClick:S},{default:t(()=>[g(" 退出登录 ")]),_:1}),r(b,{to:"/user/info","mr-3":""},{default:t(()=>[r(y,{size:"large",type:"primary"},{default:t(()=>[g(" 个人主页 ")]),_:1})]),_:1})])])])]),_:1})]),_:1})])}}}),De=q(ye,[["__scopeId","data-v-4c9e1b2e"]]);export{De as default};
