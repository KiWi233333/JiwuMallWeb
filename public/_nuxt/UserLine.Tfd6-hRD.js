import{E as V}from"./avatar.O_LQjIGj.js";import{u as O,B as U,ae as R,E as c,S as F,h as Q,aC as X,ac as S,g as Y,b5 as Z,d as q,e as G,f as H}from"./entry.t-rqPOs0.js";import{E as J}from"./upload.1UmVT-Li.js";import{_ as K}from"./nuxt-link.AUBdcVxd.js";import{E as W}from"./index.uAaZKamD.js";import"./progress.FoUIz2xX.js";import"./popper.b7Al0Wsi.js";/* empty css                */import{j as ee,a as f,k as oe,ap as ae,O as l,P as u,$ as r,a2 as t,Y as se,u as o,a5 as m,Q as s,a6 as g,ab as te,X as re,a7 as E,a0 as ne,Z as le,as as ie,an as ce,ao as pe}from"./swiper-vue.Dj7aAS3P.js";import"./cloneDeep.k3-Muxea.js";import"./isEqual.OSnr_sHV.js";const h=p=>(ce("data-v-a104155f"),p=p(),pe(),p),de={class:"user-card","flex-row-c-c":"","cursor-pointer":""},ue={"flex-row-c-c":""},me=h(()=>s("span",{"i-solar:user-bold":"",style:{width:"60%",height:"60%"}},null,-1)),_e={"pl-2":"",class:"hidden md:block"},fe={"w-7em":"","tracking-1px":"",class:"... overflow-hidden truncate"},ge={"opacity-80":"",class:"group overflow-hidden truncate p-0 decoration-dashed hover:underline"},he=h(()=>s("span",{class:"p2 opacity-0 transition-300 group-hover:opacity-80","i-solar:copy-bold-duotone":""},null,-1)),ve=h(()=>s("div",{class:"top","p-10":""},null,-1)),be={class:"popup"},ye=["src","alt"],we={class:"bottom","flex-col":""},Ie={class:"title","py-2":""},Be={grid:"","grid-cols-3":"","mb-2":"","justify-around":"","grid-gap-2":""},ke={"mt-2":""},Ue={class:"btn","flex-row-bt-c":"","pt-4":""},Se=ee({__name:"UserLine",props:{propverProps:{}},setup(p){const a=O(),N=new FormData,v=f(),_=oe({get(){return a.userInfo.avatar},set(e){a.userInfo.avatar=e}}),P=f(["image/png","image/jpg","image/jpeg","image/svg"]),C=e=>{if(P.value.includes(e.type)){if(e.size/1024/1024>2)return c.error("头像需要小于2MB!"),!1}else return c.error("文件格式不是图片格式!"),!1;return N.append("file",e),!0},x=async e=>{var n;(n=v.value)==null||n.clearFiles(),e.code===F.SUCCESS?(a.userInfo.avatar=e.data,_.value=e.data||"",c.success("更换头像成功！")):c.error(e.message)};function z(){Q.confirm("是否确认退出登录？","退出登录",{confirmButtonText:"确认退出",lockScroll:!1,cancelButtonText:"取消",type:"warning"}).then(()=>{a.onUserExit(a.token);const e=X(),n=S(),i=S();e==null||e.$reset(),n==null||n.$reset(),i==null||i.$reset(),c.success("退出成功！")}).catch(()=>{})}const $=f([{name:"个人主页",path:"/user/info",className:"bg-[var(--el-color-primary)] i-solar:home-2-bold-duotone  group-hover:animate-[tada_1s_ease]"},{name:"我的帖子",path:"/user/post",className:"i-solar:cup-hot-bold-duotone bg-[var(--el-color-info)] group-hover:animate-[portanim_1s]"},{name:"我的收藏",path:"/user/collect",className:"bg-yellow-5 i-solar:star-bold-duotone  group-hover:animate-[swing_1s_ease_1]"},{name:"钱 包",path:"/user/wallet",className:"bg-red-5 i-solar:wallet-bold-duotone  group-hover:scale-110"},{name:"购物车",path:"/user/shopcart",className:"bg-red-5 i-solar:cart-large-2-bold-duotone group-hover:animate-[shopcart_1s_ease-out]"},{name:"收货地址",path:"/user/address",className:"bg-lime-5 i-solar:compass-bold-duotone group-hover:animate-spin"},{name:"账 单",path:"/user/wallet",className:"bg-yellow-5  i-solar:bill-list-bold-duotone group-hover:animate-[tada_1s_ease-in-out_1]"},{name:"订 单",path:"/order/list",className:"bg-yellow-5 i-solar:clipboard-bold-duotone group-hover:animate-[swing_1s_ease_1]"},{name:"账户安全",path:"/user/safe",className:"bg-green-5 i-solar:danger-bold-duotone group-hover:rotate-360"}]);return(e,n)=>{const i=V,D=Y,L=Z,T=J,b=K,y=q,j=W,A=G,M=ae("copying");return l(),u("div",de,[r(A,null,{default:t(()=>{var w,I,B,k;return[r(j,se(e.propverProps,{transition:"fade",teleported:!0,style:{"transform-origin":"right top"},placement:((w=e.propverProps)==null?void 0:w.placement)||"bottom",trigger:((I=e.propverProps)==null?void 0:I.trigger)||"hover",offset:((B=e.propverProps)==null?void 0:B.offset)||20,width:((k=e.propverProps)==null?void 0:k.width)||320}),{reference:t(()=>[s("div",null,[re(e.$slots,"default",{},()=>[s("div",ue,[r(D,{"is-dot":!o(a).userInfo.avatar||o(a).userInfo.avatar==="default.png",class:"item mr-2 rounded-10em border-default"},{default:t(()=>[r(i,{src:!o(a).userInfo.avatar||o(a).userInfo.avatar==="default.png"?"":("BaseUrlImg"in e?e.BaseUrlImg:o(U))+o(a).userInfo.avatar,class:"hovers border-default"},{default:t(()=>[me]),_:1},8,["src"])]),_:1},8,["is-dot"]),s("div",_e,[s("h4",fe,m(o(a).userInfo.nickname||"未填写昵称"),1),te((l(),u("small",ge,[g(" ID:"+m(o(a).userInfo.id)+" ",1),he])),[[M,o(a).userInfo.id,void 0,{toast:!0}]])])])],!0)])]),default:t(()=>[ve,s("div",be,[r(T,{ref_key:"avatatRef",ref:v,class:"avatar-uploader",style:{width:"100%",height:"100%","border-radius":"50%"},drag:"",action:`${"BaseUrl"in e?e.BaseUrl:o(R)}/user/info/avatar`,headers:{Authorization:o(a).token},method:"PUT",limit:1,multiple:!1,"auto-upload":!0,"show-file-list":!1,"list-type":"picture","before-upload":C,"on-success":x},{default:t(()=>[o(_)?(l(),u("img",{key:0,loading:"lazy","h-6em":"","w-6em":"",src:("BaseUrlImg"in e?e.BaseUrlImg:o(U))+o(_),alt:o(a).userInfo.nickname,class:"avatar"},null,8,ye)):(l(),E(L,{key:1,size:"2em"}))]),_:1},8,["action","headers"]),s("div",we,[s("h3",Ie,m(o(a).userInfo.nickname),1),s("div",Be,[(l(!0),u(ne,null,ie(o($),d=>(l(),E(b,{key:d.path,class:"group v-card",to:d.path},{default:t(()=>[s("p",{class:le(["icon transition-200 group-hover:bg-light",d.className])},null,2),s("p",ke,m(d.name),1)]),_:2},1032,["to"]))),128))]),s("div",Ue,[r(y,{size:"large",type:"danger",plain:"","transition-icon":"","ml-3":"","icon-class":"i-solar:logout-3-broken",onClick:z},{default:t(()=>[g(" 退出登录 ")]),_:1}),r(b,{to:"/user/info","mr-3":""},{default:t(()=>[r(y,{size:"large",type:"primary","transition-icon":"","icon-class":"i-solar:home-2-bold"},{default:t(()=>[g(" 个人主页 ")]),_:1})]),_:1})])])])]),_:3},16,["placement","trigger","offset","width"])]}),_:3})])}}}),Ae=H(Se,[["__scopeId","data-v-a104155f"]]);export{Ae as default};
