import{m as g}from"./entry.HuYbGiLS.js";import{j as k,a as v,F as B,W as M,b as w,L as n,M as l,U as i,N as m,X as C,u as F,a6 as _,_ as b}from"./swiper-vue.4ZhlhtKr.js";const h={key:"load","w-full":"","flex-row-c-c":"","py-2":"","text-center":"","text-bluegray":""},A={key:1,class:"animate-fade-in"},N=k({__name:"AutoIncre",props:{noMore:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0},delay:{default:400},loading:{type:Boolean,default:!1},loadingClass:{default:"mx-a my-0.6em h-1.4rem w-1.4rem animate-[spin_2s_infinite_linear] rounded-6px bg-[var(--el-color-primary)]"},ssr:{type:Boolean,default:!0},autoStop:{type:Boolean,default:!0}},emits:["load"],setup(u,{expose:f,emit:c}){const o=u,s=c,r=v();B(()=>{o.immediate&&s("load")});let a=Date.now();const{stop:t,isSupported:p}=g(r,([e])=>{e.isIntersecting?requestAnimationFrame(y):a&&clearInterval(a)});function y(){const e=Date.now();e-a<o.delay||(o.noMore&&o.autoStop?(cancelAnimationFrame(a),t&&t()):(a=e,s("load")))}return o.immediate&&s("load"),M(()=>{cancelAnimationFrame(a),t(),a=0}),w(()=>o.noMore,e=>{e&&o.autoStop&&(cancelAnimationFrame(a),t&&t())}),f({stop:t,loadMoreRef:r}),(e,d)=>(n(),l(b,null,[i(e.$slots,"default"),e.loading?(n(),l("div",{ref_key:"loadMoreRef",ref:r,key:"loadMoreRef",class:"min-h-1em"},[i(e.$slots,"load",{},()=>[m("div",h,[m("div",{class:C(e.loadingClass)},null,2)])])],512)):(n(),l("div",A,[i(e.$slots,"done",{},()=>[!e.noMore&&!e.loading?(n(),l("div",{key:"done","h-2":"","w-full":"","text-center":"","text-bluegray":"",onClick:d[0]||(d[0]=S=>!F(p)&&e.$emit("load"))})):_("",!0)])]))],64))}});export{N as _};
