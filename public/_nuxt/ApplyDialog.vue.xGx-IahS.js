import{u as k,S as x,c as b,v as h,x as C,i as I}from"./entry.t-rqPOs0.js";import{E as S}from"./dialog.W1fDsdND.js";import{E as U}from"./notification.YJSnxgg5.js";import{j as B,k as F,a as f,O as A,a7 as N,a2 as t,a6 as _,$ as r,Q as D,u as m,ak as K,x as T}from"./swiper-vue.Dj7aAS3P.js";import{f as $}from"./friend.psniISnN.js";const j={class:"dialog-footer"},G=B({__name:"ApplyDialog",props:{show:{type:[Boolean,null]},userId:{}},emits:["update:show","submit"],setup(g,{emit:y}){const o=g,i=y,s=F({get:()=>o.show!==void 0&&o.show===!0,set:l=>i("update:show",l)}),n=f(),a=f({msg:"",targetUid:""}),w=k();async function p(){var l;(l=n==null?void 0:n.value)==null||l.validate(async e=>{if(!e||!o.userId)return;const d=await $({...a.value,targetUid:o.userId},w.getToken);s.value=!1,d.code===x.SUCCESS&&(a.value={msg:"",targetUid:""},i("submit",o.userId),U.success("好友申请已发送！"))})}return(l,e)=>{const d=b,v=h,E=C,c=I,V=S;return A(),N(V,{modelValue:m(s),"onUpdate:modelValue":e[2]||(e[2]=u=>T(s)?s.value=u:null),title:"好友申请",width:"fit-content",center:"","append-to-body":""},{footer:t(()=>[D("span",j,[r(c,{onClick:e[1]||(e[1]=u=>s.value=!1)},{default:t(()=>[_("取消")]),_:1}),r(c,{type:"primary",onClick:p},{default:t(()=>[_(" 发起申请 ")]),_:1})])]),default:t(()=>[r(E,{ref_key:"applyFormRef",ref:n,model:m(a)},{default:t(()=>[r(v,{label:"",prop:"msg",rules:[{min:1,max:50,trigger:["blur","change"],message:"申请理由1-50字符！"},{required:!0,trigger:["blur"],message:"申请理由不能为空！"}],class:"w-20rem"},{default:t(()=>[r(d,{modelValue:m(a).msg,"onUpdate:modelValue":e[0]||(e[0]=u=>m(a).msg=u),type:"textarea",rows:4,placeholder:"发送一条有趣的问候语吧~",onKeyup:K(p,["enter"])},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}});export{G as _};
