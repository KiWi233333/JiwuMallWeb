import{H as ge,Z as Be,Q as Ye,J as fe,K as Ee,I as Me,M as pe,an as Ut,ao as Ot,N as ze,O as He,h as Fe,f as _e,u as Ie,S as K,ap as Rt,aq as Bt,ar as Yt,as as Mt,at as zt,k as ae,B as Ht,G as W,z as qe,au as Ft,av as qt,v as Wt,a9 as Gt,E as ye,aw as jt,g as J,n as me,ax as Xt,c as Kt,e as Zt,a as Jt,x as Qt,y as es}from"./entry.HuYbGiLS.js";import{_ as We}from"./ElImage.H3VTC2Vd.js";import{_ as Re}from"./nuxt-link.eZ5kOSgI.js";import{E as ts}from"./divider.Dj8BMgcW.js";import{_ as Ge}from"./DelayTimer.vue.C1IdBqmv.js";import{j as F,g as je,b as ne,p as Xe,L as l,M as d,U as j,X as x,u as e,a as N,i as ss,F as Ke,o as os,k as A,r as as,a6 as w,N as s,a2 as ie,a5 as T,a0 as E,a1 as Ze,Z as v,a3 as n,a4 as p,l as ls,am as we,an as ke,ao as be,_ as le,ar as re,a9 as H,aa as Z,as as rs,x as te,z as ns,at as is}from"./swiper-vue.4ZhlhtKr.js";import{_ as ds}from"./Switch.CiJ5_qW7.js";import{u as cs}from"./index.gOl6WcbK.js";import{ElText as Je}from"./index.2AyaIaz8.js";import{a as us}from"./fetch.3IR0ILJ_.js";import{g as ms,B as ps}from"./bills.ABh5tZgM.js";import{a as fs,O as o,P as oe,p as _s,b as vs,c as ys,u as hs,r as bs,d as gs,e as Es}from"./index.xV7eTSBk.js";import{u as Se}from"./useOrderStore._PjEUjF8.js";import{a as Is,E as ws}from"./index.S0AyQ0ue.js";import{E as ks}from"./tag.Q9i6oaRN.js";import{E as Ss}from"./scrollbar.ylZGouLy.js";import{E as Qe,a as et}from"./select.Bh0wcPP9.js";import{E as tt}from"./input-number.dJQLWHXy.js";import"./popper.TZrEXPn8.js";import{g as xs}from"./index.zZZw1SHV.js";import{g as Ds,a as Cs}from"./sku.o_NVcctg.js";import{E as $s}from"./empty.TrNGK8ww.js";/* empty css              *//* empty css                    */import{E as Y}from"./notification.mMgfY760.js";import"./PreLoading.vue.RcEKquDI.js";import"./debounce.4-I_Xkye.js";import"./useToggleThemeAnima.rqlolBiN.js";import"./category.sBcSORba.js";import"./composables.QNi8Zuou.js";import"./strings.PBHHvk2X.js";import"./isEqual.gU3elsgQ.js";import"./hasIn.gQarB0Dl.js";import"./index.O6n8D2HD.js";import"./index.RtMxj6Hn.js";import"./isUndefined.IZwZ21d-.js";const Ts=ge({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),As={[Be]:(b,t)=>[b,t].every(Ye)},Ls=F({name:"ElSteps"}),Ns=F({...Ls,props:Ts,emits:As,setup(b,{emit:t}){const a=b,r=fe("steps"),{children:g,addChild:I,removeChild:f}=cs(je(),"ElStep");return ne(g,()=>{g.value.forEach((D,h)=>{D.setIndex(h)})}),Xe("ElSteps",{props:a,steps:g,addStep:I,removeStep:f}),ne(()=>a.active,(D,h)=>{t(Be,D,h)}),(D,h)=>(l(),d("div",{class:x([e(r).b(),e(r).m(D.simple?"simple":D.direction)])},[j(D.$slots,"default")],2))}});var Ps=Ee(Ns,[["__file","steps.vue"]]);const Vs=ge({title:{type:String,default:""},icon:{type:Me},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),Us=F({name:"ElStep"}),Os=F({...Us,props:Vs,setup(b){const t=b,a=fe("step"),r=N(-1),g=N({}),I=N(""),f=ss("ElSteps"),D=je();Ke(()=>{ne([()=>f.props.active,()=>f.props.processStatus,()=>f.props.finishStatus],([k])=>{ee(k)},{immediate:!0})}),os(()=>{f.removeStep(G.uid)});const h=A(()=>t.status||I.value),S=A(()=>{const k=f.steps.value[r.value-1];return k?k.currentStatus:"wait"}),C=A(()=>f.props.alignCenter),y=A(()=>f.props.direction==="vertical"),U=A(()=>f.props.simple),B=A(()=>f.steps.value.length),M=A(()=>{var k;return((k=f.steps.value[B.value-1])==null?void 0:k.uid)===(D==null?void 0:D.uid)}),u=A(()=>U.value?"":f.props.space),m=A(()=>[a.b(),a.is(U.value?"simple":f.props.direction),a.is("flex",M.value&&!u.value&&!C.value),a.is("center",C.value&&!y.value&&!U.value)]),L=A(()=>{const k={flexBasis:Ye(u.value)?`${u.value}px`:u.value?u.value:`${100/(B.value-(C.value?0:1))}%`};return y.value||M.value&&(k.maxWidth=`${100/B.value}%`),k}),$=k=>{r.value=k},z=k=>{const q=k==="wait",O={transitionDelay:`${q?"-":""}${150*r.value}ms`},de=k===f.props.processStatus||q?0:100;O.borderWidth=de&&!U.value?"1px":0,O[f.props.direction==="vertical"?"height":"width"]=`${de}%`,g.value=O},ee=k=>{k>r.value?I.value=f.props.finishStatus:k===r.value&&S.value!=="error"?I.value=f.props.processStatus:I.value="wait";const q=f.steps.value[r.value-1];q&&q.calcProgress(I.value)},G=as({uid:D.uid,currentStatus:h,setIndex:$,calcProgress:z});return f.addStep(G),(k,q)=>(l(),d("div",{style:ie(e(L)),class:x(e(m))},[w(" icon & line "),s("div",{class:x([e(a).e("head"),e(a).is(e(h))])},[e(U)?w("v-if",!0):(l(),d("div",{key:0,class:x(e(a).e("line"))},[s("i",{class:x(e(a).e("line-inner")),style:ie(g.value)},null,6)],2)),s("div",{class:x([e(a).e("icon"),e(a).is(k.icon||k.$slots.icon?"icon":"text")])},[j(k.$slots,"icon",{},()=>[k.icon?(l(),T(e(pe),{key:0,class:x(e(a).e("icon-inner"))},{default:E(()=>[(l(),T(Ze(k.icon)))]),_:1},8,["class"])):e(h)==="success"?(l(),T(e(pe),{key:1,class:x([e(a).e("icon-inner"),e(a).is("status")])},{default:E(()=>[v(e(Ut))]),_:1},8,["class"])):e(h)==="error"?(l(),T(e(pe),{key:2,class:x([e(a).e("icon-inner"),e(a).is("status")])},{default:E(()=>[v(e(Ot))]),_:1},8,["class"])):e(U)?w("v-if",!0):(l(),d("div",{key:3,class:x(e(a).e("icon-inner"))},n(r.value+1),3))])],2)],2),w(" title & description "),s("div",{class:x(e(a).e("main"))},[s("div",{class:x([e(a).e("title"),e(a).is(e(h))])},[j(k.$slots,"title",{},()=>[p(n(k.title),1)])],2),e(U)?(l(),d("div",{key:0,class:x(e(a).e("arrow"))},null,2)):(l(),d("div",{key:1,class:x([e(a).e("description"),e(a).is(e(h))])},[j(k.$slots,"description",{},()=>[p(n(k.description),1)])],2))],2)],6))}});var st=Ee(Os,[["__file","item.vue"]]);const Rs=ze(Ps,{Step:st}),Bs=He(st),Ys=F({name:"ElTimeline",setup(b,{slots:t}){const a=fe("timeline");return Xe("timeline",t),()=>ls("ul",{class:[a.b()]},[j(t,"default")])}}),Ms=ge({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:Me},hollow:{type:Boolean,default:!1}}),zs=F({name:"ElTimelineItem"}),Hs=F({...zs,props:Ms,setup(b){const t=b,a=fe("timeline-item"),r=A(()=>[a.e("node"),a.em("node",t.size||""),a.em("node",t.type||""),a.is("hollow",t.hollow)]);return(g,I)=>(l(),d("li",{class:x([e(a).b(),{[e(a).e("center")]:g.center}])},[s("div",{class:x(e(a).e("tail"))},null,2),g.$slots.dot?w("v-if",!0):(l(),d("div",{key:0,class:x(e(r)),style:ie({backgroundColor:g.color})},[g.icon?(l(),T(e(pe),{key:0,class:x(e(a).e("icon"))},{default:E(()=>[(l(),T(Ze(g.icon)))]),_:1},8,["class"])):w("v-if",!0)],6)),g.$slots.dot?(l(),d("div",{key:1,class:x(e(a).e("dot"))},[j(g.$slots,"dot")],2)):w("v-if",!0),s("div",{class:x(e(a).e("wrapper"))},[!g.hideTimestamp&&g.placement==="top"?(l(),d("div",{key:0,class:x([e(a).e("timestamp"),e(a).is("top")])},n(g.timestamp),3)):w("v-if",!0),s("div",{class:x(e(a).e("content"))},[j(g.$slots,"default")],2),!g.hideTimestamp&&g.placement==="bottom"?(l(),d("div",{key:1,class:x([e(a).e("timestamp"),e(a).is("bottom")])},n(g.timestamp),3)):w("v-if",!0)],2)],2))}});var ot=Ee(Hs,[["__file","timeline-item.vue"]]);const Fs=ze(Ys,{TimelineItem:ot}),qs=He(ot),at=b=>(we("data-v-c575cda8"),b=b(),ke(),b),Ws=at(()=>s("span",{class:"hidden overflow-hidden truncate md:inline"},"刷新",-1)),Gs=at(()=>s("i",{class:"i-solar:refresh-outline w-1.4em w-1.4em cursor-pointer bg-[var(--el-color-info)] transition-300 hover:rotate-180",alt:"页面刷新"},null,-1)),js=F({__name:"Reload",emits:["reload"],setup(b){return(t,a)=>{const r=Fe;return l(),T(r,{class:"btn",round:"",onClick:a[0]||(a[0]=g=>t.$emit("reload"))},{default:E(()=>[Ws,Gs]),_:1})}}}),Xs=_e(js,[["__scopeId","data-v-c575cda8"]]),Ks={class:"el-timeline-item__content pb-1"},Zs={class:"mr-2 cursor-pointer select-none text-[var(--el-color-success)] active:underline hover:underline"},Js=F({__name:"TimeLine",props:{orderInfo:{}},setup(b,{expose:t}){const a=b,r=Ie(),g=N(!1),I=N([{active:1,time:a.orderInfo.createTime,title:"创建订单"}]),f=us(async()=>{const{data:D,code:h}=await ms(1,1,{orderId:a.orderInfo.id,type:ps.OUT},r.getToken);return h!==K.SUCCESS?void 0:(D.records.length>0&&I.value.push({active:2,title:"已支付，待发货",time:D.records[0].createTime}),(await fs(a.orderInfo.id,r.getToken)).data)},"$XiIXeT5yya");return t({reload:f.refresh}),(D,h)=>{const S=qs,C=Je,y=Fs,U=be("copying");return l(),d("section",null,[v(y,null,{default:E(()=>{var B;return[(l(!0),d(le,null,re(e(I),M=>(l(),T(S,{key:M.active,color:"var(--el-color-success-light-3)",timestamp:M.time},{default:E(()=>[p(n(M.title),1)]),_:2},1032,["timestamp"]))),128)),H(v(S,{timestamp:(B=e(f).data.value)==null?void 0:B.createTime,color:"var(--el-color-success-light-3)"},{default:E(()=>{var M,u,m,L,$,z;return[s("div",null,[s("div",Ks,[p(" 已发货， "),H((l(),d("span",Zs,[p(n((M=e(f).data.value)==null?void 0:M.deliveryNum),1)])),[[U,(u=e(f).data.value)==null?void 0:u.deliveryNum,void 0,{toast:!0}]]),v(C,{size:"small",class:"cursor-pointer select-none active:underline hover:underline",type:e(g)?"danger":"",onClick:h[0]||(h[0]=ee=>g.value=!e(g))},{default:E(()=>[p(n(e(g)?"折叠":"展开"),1)]),_:1},8,["type"])]),s("div",{class:x([{"h-6em":e(g)},"h-0 flex flex-col overflow-hidden rounded-6px pt-1 leading-1.4em opacity-90 transition-height"])},[s("small",null,"订单号："+n((m=e(f).data.value)==null?void 0:m.deliveryNum),1),s("small",null,"快递单号："+n((L=e(f).data.value)==null?void 0:L.deliveryNum),1),s("small",null,"收货地址："+n(($=e(f).data.value)==null?void 0:$.sendAddress),1),s("small",null,"发货地址："+n((z=e(f).data.value)==null?void 0:z.deliverAddress),1)],2)])]}),_:1},8,["timestamp"]),[[Z,e(f).data.value]]),j(D.$slots,"default",{data:e(f)})]}),_:3})])}}}),xe=b=>(we("data-v-aee7fb3a"),b=b(),ke(),b),Qs={class:"mb-3 flex flex-col"},eo={key:1,class:"mt-4 border-0 border-t-1px rounded-0 pl-2 pt-4 border-default md:pl-12"},to={key:2,class:"text-[var(--el-color-primary)]",flex:"","items-center":"","px-3":"","leading-2em":""},so=xe(()=>s("i",{"i-solar:clock-circle-broken":"","mx-4":"","mr-6":"","p-4":""},null,-1)),oo={class:"flex flex-1 flex-col"},ao={key:0},lo={key:1},ro={key:3,flex:"","flex-col":"","leading-1.6em":""},no=xe(()=>s("h3",{"mb-2":""}," 退款中，请等待商家处理！ ",-1)),io={key:4,flex:"","flex-col":"","leading-1.6em":""},co=xe(()=>s("h3",{"mb-2":""}," 退款成功，请注意查收退款金额！ ",-1)),uo=F({__name:"StatusSteps",props:{active:{},date:{},color:{}},setup(b){const t=b,a=Se(),r=A(()=>`color:var(--el-color-${t.color})`);function g(){a.status=o.DELAY_CANCELED,a.orderInfo.status=o.DELAY_CANCELED,a.orderInfo.updateTime=ae(Date.now(),"YYYY-MM-DD HH:mm:ss").value.toString()}return(I,f)=>{const D=Bs,h=Ge,S=Rs,C=Js;return l(),d("section",Qs,[t.active>e(o).READY&&t.active<e(o).CANCELED?(l(),T(S,{key:0,class:"mt-4",style:ie(e(r)),active:t.active+1,"align-center":""},{default:E(()=>[v(D,{title:"提交订单",icon:"ElIconShoppingCartFull"in I?I.ElIconShoppingCartFull:e(Rt)},null,8,["icon"]),v(D,{icon:"ElIconMoney"in I?I.ElIconMoney:e(Bt)},{icon:E(()=>[s("i",{class:x({"text-[var(--el-color-danger)] ":I.active===e(o).UN_PAID}),"i-solar:sale-broken":"","p-3.4":""},null,2)]),title:E(()=>[s("strong",{class:x({"text-[var(--el-color-danger)] ":I.active===e(o).UN_PAID})}," 待支付 ",2)]),description:E(()=>[I.active===e(o).UN_PAID?(l(),T(h,{key:0,date:new Date(t.date),class:"font-600 text-[var(--el-color-danger)]",onDelay:g},null,8,["date"])):w("",!0)]),_:1},8,["icon"]),v(D,{title:"待发货",description:"48小时内发货",icon:"ElIconCreditCard"in I?I.ElIconCreditCard:e(Yt)},null,8,["icon"]),v(D,{title:"待收货",icon:"ElIconVan"in I?I.ElIconVan:e(Mt)},null,8,["icon"]),v(D,{title:"待评价",icon:"ElIconChatDotSquare"in I?I.ElIconChatDotSquare:e(zt)},null,8,["icon"])]),_:1},8,["style","active"])):w("",!0),t.active===e(o).DELIVERED?(l(),d("section",eo,[v(C,{"order-info":e(a).orderInfo},null,8,["order-info"])])):w("",!0),t.active===e(o).DELAY_CANCELED||t.active===e(o).CANCELED?(l(),d("section",to,[so,s("div",oo,[t.active===e(o).DELAY_CANCELED?(l(),d("h3",ao," 订单已超时 自动取消，欢迎下次选购！ ")):w("",!0),t.active===e(o).CANCELED?(l(),d("h3",lo," 订单已取消，欢迎下次选购！ ")):w("",!0),s("small",null,n(e(a).orderInfo.updateTime),1)])])):w("",!0),t.active===e(o).REFUND?(l(),d("section",ro,[no,s("small",null,"最后更新："+n(e(a).orderInfo.updateTime),1)])):w("",!0),t.active===e(o).REFUND_SUCCESS?(l(),d("section",io,[co,s("small",null,"退款时间："+n(e(a).orderInfo.updateTime),1)])):w("",!0)])}}}),mo=_e(uo,[["__scopeId","data-v-aee7fb3a"]]),po={"flex-row-c-c":"","justify-start":"","border-0":"","border-b-2px":"","pb-2":"","font-600":"","border-default-dashed":""},fo={"pt-2":""},_o={"mt-1":"","opacity-80":""},vo={"pr-1":""},yo={"pr-1":""},ho={"pr-1":""},bo={class:"truncate"},go={class:"btns mt-a w-1/1 flex-row-bt-c"},Eo=F({__name:"AddressBoxSe",props:{address:{}},setup(b){return(t,a)=>{const r=ks;return l(),d("div",{key:t.address.id,relative:"","mr-3":"","mt-2":"","min-h-160px":"","w-240px":"",flex:"","flex-col":"","cursor-pointer":"","border-2px":"","rounded-6px":"","rounded-8px":"","p-3.4":"","leading-1.2em":"","opacity-90":"","transition-300":"","border-default":"",class:"group hover:border-[var(--el-color-primary)] dark:hover:border-[var(--el-color-primary)]"},[s("div",po,[s("p",null,n(t.address.name),1),t.address.isDefault&&t.address.isDefault===1?(l(),T(r,{key:0,class:"ml-a",plain:""},{default:E(()=>[p(" 默认地址 ")]),_:1})):w("",!0)]),s("small",fo,n(t.address.phone),1),s("div",_o,[s("small",vo,n(t.address.province),1),s("small",yo,n(t.address.city),1),s("small",ho,n(t.address.county),1)]),s("small",bo,n(t.address.address),1),s("div",go,[j(t.$slots,"btns")])])}}}),Io={class:"flex flex-col text-1.1rem"},wo={class:"flex flex-wrap items-center px-2 leading-1.6em"},ko=s("i",{class:"i-solar:map-point-bold-duotone mx-3 bg-[var(--el-color-danger-light-3)] p-5"},null,-1),So={class:"flex flex-col p-3"},xo={"font-500":"","opacity-80":""},Do={"text-0.8em":""},Co=F({__name:"AddressInfo",props:{address:{}},setup(b){return(t,a)=>(l(),d("div",Io,[s("div",wo,[ko,s("div",So,[s("strong",null,[p(n(t.address.name)+" ",1),s("small",xo,n(t.address.phone),1)]),s("small",null,n(t.address.province)+" "+n(t.address.city)+" "+n(t.address.county),1),s("small",Do,n(t.address.address)+" "+n(t.address.postalCode),1)])])]))}}),$o={class:"group overflow-hidden text-1rem",flex:"","flex-wrap":"","cursor-pointer":"","justify-between":"","border-2px":"","rounded-8px":"","p-0":"","text-0.6rem":"","border-default-hover":"","md:p-3":"","md:text-1em":""},To={class:"flex flex-1 justify-between overflow-hidden truncate py-2"},Ao={class:"group left h-full flex flex-col items-start justify-between px-4"},Lo={class:"max-w-1/1 overflow-hidden truncate text-1.2em md:max-w-16em"},No={"my-a":"","color-red-6":"","font-700":""},Po={"text-0.8em":"","color-coolgray":"",style:{"text-decoration":"line-through"}},Vo={"flex-row-bt-c":"",class:"mt-2"},Uo={class:"flex items-end md:mr-4"},Oo={class:"mr-2 mt-a"},Ro={key:0},Bo={class:"text-[var(--el-color-error)]"},Yo={class:"mt-a hidden flex-col items-end leading-1.2em md:flex"},Mo={key:1,"mt-1":"","font-600":""},zo={class:"relative mr-4 flex-row-c-c flex-col text-0.9em md:mr-0 md:w-1/10"},Ho={key:1,class:"font-700 opacity-40"},Fo=F({__name:"OrderSku",props:{data:{},disable:{type:Boolean}},async setup(b){let t,a;const{data:r,disable:g}=b,I=N(!1),f=N(!0),D=N([]);async function h(u){if(u&&f.value){const m=await Ds(r.goodsId);setTimeout(()=>{var L;(L=m.data.value)==null||L.data.forEach($=>D.value.push($)),f.value=!1},300)}}const S=N(new Map);async function C(){var m,L;if(!r.activityId)return;const u=await xs(r.activityId);(m=u.data.value)!=null&&m.code&&((L=u.data.value)==null||L.data.list.forEach($=>{r.skuId===$.skuId&&S.value.set($.skuId,$)}))}[t,a]=rs(()=>C()),await t,a(),ne(()=>r.activityId,()=>{C()},{immediate:!0}),ne(()=>r.skuId,u=>{if(u&&u){const m=S.value.get(u);m&&(r.price=m==null?void 0:m.eventPrice)}},{immediate:!0});function y(u){return`${u.size||""} ${u.color||""} ${u.combo||""}`}const U=A({get(){return`${r.size||""} ${r.color||""} ${r.combo||""}`},set(u){const m=ns(D.value.find($=>$.id===u));let L=m==null?void 0:m.price;if(m&&m.id&&r.activityId){const $=S.value.get(m.id);$&&(L=$==null?void 0:$.eventPrice)}m&&m.id!==""&&(r.size=m.size||"",r.image=m.image,r.price=L||0,r.costPrice=m.costPrice,r.color=m.color||"",r.combo=m.combo,r.skuId=m.id,r.id=m.id)}}),B=A(()=>W(r.price).multiply(r.quantity)),M=A(()=>B.value.add(r.postage));return(u,m)=>{var k,q;const L=We,$=Qe,z=et,ee=tt,G=qe;return H((l(),d("div",$o,[s("div",{class:x(["relative w-2/7 md:w-8em",{"is-event ":u.data.activityId}])},[v(L,{loading:"lazy",src:("BaseUrlImg"in u?u.BaseUrlImg:e(Ht))+u.data.image,style:{width:"100%",height:"100%","aspect-ratio":"1/1","border-radius":"4px"},fit:"cover"},null,8,["src"])],2),s("div",To,[s("div",Ao,[s("h3",Lo,n(u.data.name),1),s("div",No,[p(" ￥"+n(e(W)(u.data.price))+" ",1),s("span",Po," ￥"+n(e(W)(u.data.costPrice)),1)]),s("div",Vo,[v(z,{modelValue:e(U),"onUpdate:modelValue":m[0]||(m[0]=O=>te(U)?U.value=O:null),disabled:u.disable,"no-data-text":"暂无其他规格！","loading-text":"加载中...",loading:e(f),placeholder:e(U),"collapse-tags-tooltip":"",onVisibleChange:h},{default:E(()=>[(l(!0),d(le,null,re(e(D),O=>(l(),T($,{key:O.id,label:y(O),value:O.id,disabled:O.stock===0},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue","disabled","loading","placeholder"])])]),s("div",Uo,[s("div",Oo,[u.disable?(l(),d("small",Ro,[p(" 共 "),s("strong",Bo,n(u.data.quantity),1),p(" 件  ")])):w("",!0)]),s("div",Yo,[s("small",null,n(u.data.postage?`运费：￥${u.data.postage}`:"免运费"),1),u.data?(l(),d("small",{key:0,class:x({"text-[var(--el-color-error)]":(k=e(S).get(u.data.skuId))==null?void 0:k.eventPrice})},n((q=e(S).get(u.data.skuId))!=null&&q.eventPrice?"活动":"")+"价格：￥"+n(e(B)),3)):w("",!0),u.data.quantity?(l(),d("small",Mo," 合计：￥"+n(e(M)),1)):w("",!0)])])]),s("div",zo,[j(u.$slots,"btn",{},()=>[u.disable?(l(),d("span",Ho," 选中 ")):(l(),T(ee,{key:0,modelValue:u.data.quantity,"onUpdate:modelValue":m[1]||(m[1]=O=>u.data.quantity=O),min:1,max:99,style:{width:"5rem"},disabled:u.disable,size:"small"},null,8,["modelValue","disabled"]))],!0)])])),[[G,e(I)]])}}}),qo=_e(Fo,[["__scopeId","data-v-33cab4ab"]]),Wo={flex:"","items-end":""},Go={class:"relative flex flex-col"},jo={class:"absolute bottom-1em right-0 mb-1 ml-a flex-row-c-c text-[var(--el-color-error)]"},Xo={block:""},Ko={flex:"","items-end":"","justify-end":""},Zo={class:"flex flex-col"},Jo=F({__name:"SelectPoints",props:{modelValue:{default:0},getPointMax:{},getFinalPrice:{}},emits:["update:modelValue"],setup(b,{emit:t}){const a=b,r=t,g=A({get(){return a.modelValue},set(h){r("update:modelValue",h)}}),I=Ie(),f=Se();function D(h){f.status!==o.READY&&f.status!==o.UN_PAID||(h.deltaY<0?a.modelValue<1e4&&a.getFinalPrice.intValue>0&&r("update:modelValue",a.modelValue+100):a.modelValue>=100&&r("update:modelValue",a.modelValue-100))}return(h,S)=>{const C=tt;return l(),d("div",Wo,[s("small",Go,[H(s("div",jo,[p(" - "),s("span",Xo,n(a.modelValue),1)],512),[[Z,a.modelValue>0]]),s("div",Ko,[p(" 积分剩余： "),s("div",Zo,[s("div",null,n(e(I).userWallet.points),1)])])]),v(C,{modelValue:e(g),"onUpdate:modelValue":S[0]||(S[0]=y=>te(g)?g.value=y:null),modelModifiers:{lazy:!0},style:{width:"6em"},class:x(["ml-4 cursor-ns-resize transition-300",{"opacity-60":a.modelValue===0}]),disabled:e(f).status!==("OrdersStatus"in h?h.OrdersStatus:e(o)).READY&&e(f).status!==("OrdersStatus"in h?h.OrdersStatus:e(o)).UN_PAID,step:100,"step-strictly":!0,"controls-position":"right",label:"只能以100为倍数",min:0,max:a.getPointMax,onWheel:S[1]||(S[1]=y=>D(y))},null,8,["modelValue","class","disabled","max"])])}}});function he(b,t,a){const r=Ft({title:b,body:t,icon:"/logo.png",...a});r.isSupported&&r.show()}const Qo=is(()=>Qt(()=>import("./index.2AyaIaz8.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(b=>b.default||b)),Q=b=>(we("data-v-c39435a3"),b=b(),ke(),b),ea={key:0,class:"min-h-100vh tracking-0.1em layout-default-se"},ta={class:"group mb-2rem mt-1rem flex flex-row-bt-c flex-wrap select-none"},sa={class:"flex items-center"},oa={key:0,inline:"",truncate:""},aa={class:"flex"},la={key:"address-list",class:"address-list w-full flex flex-col"},ra={"mb-2":"","tracking-0.2em":""},na={class:"w-800px flex pb-3 md:w-full"},ia=Q(()=>s("strong",{class:"mt-2 opacity-40 transition-300"},"添加新地址",-1)),da={class:"order-item flex flex-col border-default v-card"},ca={"mb-2":""},ua={class:"border-default v-card"},ma={class:"flex-row-bt-c"},pa=Q(()=>s("span",null,"代金卷",-1)),fa={key:0,class:"flex-row-bt-c border-0"},_a=Q(()=>s("span",null,[p(" 积分抵扣 "),s("small",{"opacity-80":""},"100积分低1元（每单上限10000积分）")],-1)),va={key:1,"font-600":"","opacity-40":""},ya={class:"flex-row-bt-c border-default v-card"},ha={class:"w-10rem flex justify-end md:w-14rem"},ba={key:1,"text-right":""},ga={key:0,class:"border-default v-card"},Ea={"tracking-0.2em":""},Ia={class:"left flex items-center"},wa=["innerHTML"],ka={"text-0.8rem":""},Sa={key:0},xa={key:0,flex:"","items-center":""},Da={key:1,"text-0.6rem":"","font-500":"","opacity-60":""},Ca={key:1,class:"flex flex-col leading-2em opacity-80 border-default v-card"},$a={"tracking-0.2em":""},Ta={class:"w-full flex-row-bt-c cursor-pointer"},Aa={class:"transition-300 hover:text-[var(--el-color-info)] hover:underline"},La=Q(()=>s("i",{class:"i-solar:copy-outline p-2 opacity-60"},null,-1)),Na={"w-full":"","flex-row-bt-c":""},Pa={"opacity-80":"",style:{"font-family":"Helvetica"}},Va={"w-full":"","flex-row-bt-c":""},Ua={"opacity-80":"",style:{"font-family":"Helvetica"}},Oa={"w-full":"","flex-row-bt-c":""},Ra={"opacity-80":"",style:{"font-family":"Helvetica"}},Ba={class:"flex flex-col leading-2em border-default v-card"},Ya=Q(()=>s("h4",{"tracking-0.2em":""}," 金额明细 ",-1)),Ma={class:"w-full flex-row-bt-c opacity-80"},za={class:"w-full flex-row-bt-c opacity-80"},Ha={class:"text-[var(--el-color-error)]"},Fa={class:"w-full flex-row-bt-c opacity-80"},qa={class:"w-full flex-row-bt-c opacity-80"},Wa={class:"w-full flex-row-bt-c opacity-80"},Ga={class:"text-[var(--el-color-error)]"},ja={class:"w-full flex-row-bt-c opacity-80"},Xa={class:"text-[var(--el-color-error)]"},Ka={key:0,class:"w-full flex-row-bt-c opacity-80"},Za={class:"text-[var(--el-color-error)]"},Ja={"w-full":"","flex-row-bt-c":""},Qa={class:"flex text-[var(--el-color-error)]"},el={block:""},tl={class:"sticky bottom-6 flex-row-bt-c shadow-lg border-default v-card"},sl={class:"menu"},ol=Q(()=>s("i",{"i-solar:headphones-round-sound-line-duotone":"","mr-2":"","p-.8em":""},null,-1)),al={class:"group submit flex cursor-pointer items-center"},ll=Q(()=>s("i",{class:"fold i-solar:menu-dots-bold-duotone mr-6 block h-6 w-6 md:hidden"},null,-1)),rl={class:"submit-lbtns mr-3 hidden flex-row-c-c transition-200 transition-all md:flex border-default md:border-none"},nl={key:1,"h-90vh":"","w-full":"","flex-row-c-c":""},il=Q(()=>s("h4",{mb4:"","font-500":""}," 订单已删除或不存在！ ",-1)),dl=F({__name:"detail",setup(b){var Te;const t=Se(),a=qt(),r=Ie(),g=Wt(),I=N(oe.WEALLET),f=N([{disable:!1,type:oe.WEALLET,icon:"<i block w-full h-full   i-solar:wallet-bold-duotone bg-red-5>",title:"钱包",amount:A(()=>`￥${W(r.userWallet.balance)}`)},{disable:!0,type:oe.WECHAT,icon:`<svg
					t="1689749259928"
					class="icon"
					viewBox="0 0 1024 1024"
					version="1.1"
					xmlns="http://www.w3.org/2000/svg"
					p-id="1522"
				>
					<path
						class="fill-[#29bd29] dark-fill-##29bd29"
						d="M683.058 364.695c11 0 22 1.016 32.943 1.976C686.564 230.064 538.896 128 370.681 128c-188.104 0.66-342.237 127.793-342.237 289.226 0 93.068 51.379 169.827 136.725 229.256L130.72 748.43l119.796-59.368c42.918 8.395 77.37 16.79 119.742 16.79 11 0 21.46-0.48 31.914-1.442a259.168 259.168 0 0 1-10.455-71.358c0.485-148.002 128.744-268.297 291.403-268.297l-0.06-0.06z m-184.113-91.992c25.99 0 42.913 16.79 42.913 42.575 0 25.188-16.923 42.579-42.913 42.579-25.45 0-51.38-16.85-51.38-42.58 0-25.784 25.93-42.574 51.38-42.574z m-239.544 85.154c-25.384 0-51.374-16.85-51.374-42.58 0-25.784 25.99-42.574 51.374-42.574 25.45 0 42.918 16.79 42.918 42.575 0 25.188-16.924 42.579-42.918 42.579z m736.155 271.655c0-135.647-136.725-246.527-290.983-246.527-162.655 0-290.918 110.88-290.918 246.527 0 136.128 128.263 246.587 290.918 246.587 33.972 0 68.423-8.395 102.818-16.85l93.809 50.973-25.93-84.677c68.907-51.93 120.286-119.815 120.286-196.033z m-385.275-42.58c-16.923 0-34.452-16.79-34.452-34.179 0-16.79 17.529-34.18 34.452-34.18 25.99 0 42.918 16.85 42.918 34.18 0 17.39-16.928 34.18-42.918 34.18z m188.165 0c-16.984 0-33.972-16.79-33.972-34.179 0-16.79 16.927-34.18 33.972-34.18 25.93 0 42.913 16.85 42.913 34.18 0 17.39-16.983 34.18-42.913 34.18z"
						p-id="1523"
					></path>
				</svg>`,title:"微信"},{disable:!0,type:oe.ALIPAY,icon:`<svg
					t="1689752384390"
					class="icon"
					viewBox="0 0 1024 1024"
					version="1.1"
					xmlns="http://www.w3.org/2000/svg"
					p-id="2518"
				>
					<path
						d="M230.771014 576.556522c-12.614493 9.646377-25.228986 23.744928-28.93913 42.295652-5.194203 24.486957-0.742029 55.652174 22.26087 80.13913 28.93913 28.93913 72.718841 37.101449 92.011594 38.585508 51.2 3.710145 106.110145-22.26087 147.663768-50.457971 16.324638-11.130435 43.77971-34.133333 70.492754-69.750725-59.362319-30.423188-133.565217-64.556522-212.22029-61.588406-41.553623 1.484058-70.492754 9.646377-91.269566 20.776812zM983.188406 712.347826c25.971014-61.588406 40.811594-129.113043 40.811594-200.347826 0-281.971014-230.028986-512-512-512S0 230.028986 0 512s230.028986 512 512 512c170.666667 0 321.298551-83.849275 414.794203-212.22029C838.492754 768.742029 693.797101 696.023188 604.011594 652.985507c-42.295652 48.973913-105.368116 97.205797-176.602898 117.982609-44.521739 13.356522-85.333333 18.550725-126.886957 9.646377-42.295652-8.904348-72.718841-28.197101-90.527536-47.489855-8.904348-10.388406-19.292754-22.26087-27.455073-37.843479 0.742029 0.742029 0.742029 2.226087 0.742029 2.968116 0 0-4.452174-7.42029-7.420289-19.292753-1.484058-5.936232-2.968116-11.872464-3.710145-17.808696-0.742029-4.452174-0.742029-8.904348 0-12.614493-0.742029-7.42029 0-15.582609 1.484058-23.744927 4.452174-20.776812 12.614493-43.77971 35.617391-65.298551 48.973913-48.231884 115.014493-50.457971 149.147826-50.457971 50.457971 0.742029 138.017391 22.26087 212.22029 48.973913 20.776812-43.77971 34.133333-89.785507 42.295652-121.692754H304.973913v-33.391304h158.052174v-66.782609H272.324638v-34.133333h190.701449v-66.782609c0-8.904348 2.226087-16.324638 16.324638-16.324637h74.944927v83.107246h207.026087v33.391304H554.295652v66.782609H719.768116S702.701449 494.933333 651.501449 586.202899c115.014493 40.811594 277.518841 104.626087 331.686957 126.144927z m0 0"
						fill="#1374f7"
						p-id="2519"
					></path>
				</svg>`,title:"支付宝"}]);g.query.id&&t.reloadOrderInfo();const D=new Map([[o.READY,{banner:"提交订单",submitText:"提交订单",type:"primary",btnType:"primary"}],[o.UN_PAID,{banner:"待付款",submitText:"立即付款",type:"danger",btnType:"danger"}],[o.PAID,{banner:"已付款，等待发货📦",submitText:"催发货",type:"primary",btnType:"primary"}],[o.DELIVERED,{banner:"已发货，请等待物流运算",submitText:"确认收货",type:"success",btnType:"success"}],[o.RECEIVED,{banner:"已确认收货，期待你的评价！",submitText:"去评价",type:"info",btnType:"info"}],[o.COMMENTED,{banner:"已完成评论，欢迎下次光临！",submitText:"再来一单",type:"success",btnType:"success"}],[o.CANCELED,{banner:"订单已取消...",submitText:"再来一单",type:"primary",btnType:"primary"}],[o.DELAY_CANCELED,{banner:"订单已超时自动取消...",submitText:"再来一单",type:"primary",btnType:"primary"}],[o.REFUND,{banner:"发起退款中，等等卖家处理...",submitText:"等待中，请稍后",type:"warning",btnType:"warning"}],[o.REFUND_SUCCESS,{banner:"退款成功，请注意到账！",submitText:"再来一单",type:"info",btnType:"info"}]]),h=A(()=>D.get(t.status)||{banner:"",submitText:"",type:"primary",btnType:"primary"}),S=N(!1),C=N(t.status===o.READY),y=N(!1),U=N(!1);a.addressList.length===0&&a.resetRequestList(r.getToken);const B=N([]),M=[];(Te=t.pushOrderItems)==null||Te.forEach(c=>{M.push(c.skuId)});async function u(){if(M.length===0)return;const{data:c,code:i}=await Cs(M);i===K.SUCCESS&&c.forEach(V=>{const P=t.pushOrderItems.find(R=>R.skuId===V.id)||{skuId:"",quantity:0};B.value.push({...V,...P})})}u();const m=N("");Ke(()=>{var c,i;m.value=((c=a.addressList.find(V=>V.isDefault===1))==null?void 0:c.id)||((i=a.addressList[0])==null?void 0:i.id)||""});const L=N(""),$=N([]),z=N(0),ee=N(0),G=N(t.orderInfo.remark);ne(S,c=>{c&&(z.value=0)});async function k(c){switch(S.value=!1,C.value=!1,Ce(),c){case o.READY:lt(()=>{De(I.value),y.value=!1});break;case o.UN_PAID:await De(I.value);break;case o.PAID:rt();break;case o.DELIVERED:ct();break;case o.CANCELED:case o.DELAY_CANCELED:case o.COMMENTED:case o.REFUND_SUCCESS:await ut(t.pushOrderItems);break;case o.RECEIVED:mt();break}}const q=A(()=>{let c=W(0);return B.value.forEach(i=>{c=c.add(W(i.price).multiply(i.quantity))}),c}),O=A(()=>{let c=W(0);return B.value.forEach(i=>{c=c.add(W(i.postage))}),c}),de=A(()=>{const c=q.value.add(O.value);return c.intValue>1e4?1e4:c.intValue}),ce=A(()=>q.value.add(O.value).subtract((z.value||0)/100)),ue=A(()=>t.orderInfo.spendPrice?W(t.orderInfo.totalPrice).subtract(t.orderInfo.spendPrice):0);async function lt(c){if(!m.value){ye.error("请选择收货地址！"),C.value=!0;return}if(y.value)return;y.value=!0;const i=B.value.map(X=>({skuId:X.skuId,quantity:X.quantity,shopId:X.shopId,couponId:X.couponId,activityId:X.activityId})),{data:V,message:P,code:R}=await _s(m.value,i,jt(G.value),r.getToken);R===K.SUCCESS?(t.$patch({orderId:V.orderId,unPaidVO:V,status:o.UN_PAID}),t.orderInfo.updateTime=ae(Date.now(),"YYYY-MM-DD HH:mm:ss").value.toString(),t.orderInfo.createTime=t.orderInfo.updateTime,setTimeout(async()=>{Y.success({title:"提交成功！",message:"提交订单成功，请在24小时内完成付款"}),he("提交成功！","提交订单成功，请在24小时内完成付款"),c&&c()},300)):(Y.error({title:"提交失败，请稍后再试！",message:P||""}),y.value=!1)}async function De(c){var V;if(t.status!==o.UN_PAID)return;if(ce.value.value>+r.userWallet.balance){J.confirm("余额不足，是否前往充值?","余额提示",{confirmButtonText:"充值",cancelButtonText:"取消",lockScroll:!1,type:"warning"}).then(()=>{me({path:"/user/info"})}).catch(()=>{Y.error({title:"操作提醒",message:"用户取消了支付！"})});return}const i=((V=f.value.find(P=>P.type===c))==null?void 0:V.title)||oe.WEALLET;try{if(await J.confirm(`使用${i}支付 ￥${ce.value}？`,"确认支付",{confirmButtonText:"支 付",lockScroll:!1,confirmButtonClass:"el-button--info border-default shadow-sm",cancelButtonText:"取 消",center:!0})==="confirm"){y.value=!0;const{data:R,message:X,code:ve}=await vs(t.orderId||t.orderInfo.id,oe.WEALLET,z.value,L.value,r.getToken);ve===K.SUCCESS?(Y.success({title:"付款成功！",message:`支付成功，共花费${R}元`}),he("付款成功！",`支付成功，共花费${R}元`),t.status=o.PAID,t.orderInfo.status=o.PAID):Y.error({title:"支付失败，请稍后再试！",message:X})}y.value=!1}catch{y.value=!1}finally{y.value=!1}}function rt(){J.alert("我们已收到您的订单，将尽快处理并安排发货！","提 醒",{confirmButtonText:"明 白",lockScroll:!1,center:!0}).catch()}async function nt(c){if(t.status===o.UN_PAID)try{if(await J.confirm("是否确认取消订单？","取消提示",{lockScroll:!1,confirmButtonText:"确 认",confirmButtonClass:"el-button--primary is-plain border-default ",cancelButtonText:"取 消",center:!0})==="confirm"){y.value=!0;const{code:V}=await ys(c||t.orderInfo.id,r.getToken);y.value=!1,V===K.SUCCESS?(t.orderInfo.updateTime=ae(Date.now(),"YYYY-MM-DD HH:mm:ss").value.toString(),t.status=o.CANCELED,t.orderInfo.status=o.CANCELED,Y.success({title:"取消成功 🎟",message:"订单取消成功，优惠卷等优惠也将原路退回！"})):Y.error({title:"订单取消失败，请稍后再试！"})}}catch{y.value=!1}finally{y.value=!1}}async function it(c){if(t.status!==o.UN_PAID&&t.status!==o.PAID)return;if(C.value=!1,y.value=!0,m.value===""){ye.warning("请选择修改地址！");return}const{message:i,code:V}=await hs(c,m.value,G.value||t.orderInfo.remark,r.getToken);if(y.value=!1,V===K.SUCCESS){t.orderInfo.updateTime=ae(Date.now(),"YYYY-MM-DD HH:mm:ss").value.toString();const P=a.addressList.find(R=>R.id===m.value);P&&(t.orderInfo.name=P.name,t.orderInfo.phone=P.phone,t.orderInfo.province=P.province,t.orderInfo.city=P.city,t.orderInfo.county=P.county,t.orderInfo.address=P.address,t.orderInfo.postalCode=P.postalCode,t.orderInfo.remark=G.value),Y.success({title:"修改订单成功！"})}else Y.error({title:"修改失败，请稍后再试！",message:i})}async function dt(c){if(!(t.status!==o.PAID&&t.status!==o.RECEIVED&&t.status!==o.DELIVERED))try{if(await J.confirm("确认发起退款？😢","退款提示",{center:!0,confirmButtonText:"退 款",confirmButtonClass:"el-button--danger border-default shadow-sm",cancelButtonText:"取 消",lockScroll:!1})==="confirm"){y.value=!0;const{message:V,code:P}=await bs(c||t.orderInfo.id,r.getToken);y.value=!1,P===K.SUCCESS?(t.orderInfo.updateTime=ae(Date.now(),"YYYY-MM-DD HH:mm:ss").value.toString(),t.status===o.RECEIVED?(t.status=o.REFUND,t.orderInfo.status=o.REFUND,Y.success({title:"发起退款成功",message:V})):(t.status=o.REFUND_SUCCESS,t.orderInfo.status=o.REFUND_SUCCESS,Y.success({title:"发起退款成功",message:"未发货，正在自动退款，请等待！"}))):Y.error({title:"发起退款失败，请稍后再试！"})}}catch{y.value=!1}finally{y.value=!1}}async function ct(){if(t.status===o.DELIVERED)try{if(await J.confirm("是否确认收货？","收货提示",{center:!0,confirmButtonText:"确 认",confirmButtonClass:"el-button--success border-default shadow-sm",cancelButtonText:"取 消",lockScroll:!1})==="confirm"){y.value=!0;const{code:i}=await gs(t.orderInfo.id,r.getToken);y.value=!1,i===K.SUCCESS?(t.orderInfo.updateTime=ae(Date.now(),"YYYY-MM-DD HH:mm:ss").value.toString(),t.status=o.RECEIVED,t.orderInfo.status=o.RECEIVED,Y.success({title:"收货成功",message:"收货确认成功！如有任何问题，请随时联系我们的客服。"}),he("收货成功","收货确认成功！如有任何问题，请随时联系我们的客服。")):Y.error({title:"确认收货失败，请稍后再试！"})}}catch{}finally{y.value=!1}}async function ut(c){if(!c||c.length===0)return;y.value=!0;const i=[...c];t.clearOrderItems(),t.$patch({pushOrderItems:i}),C.value=!0,S.value=!1,setTimeout(()=>{y.value=!1},500)}function mt(){t.status===o.RECEIVED&&me({path:`/order/comment/${t.orderInfo.id}`})}async function pt(c){if(!(t.orderInfo.status!==o.REFUND_SUCCESS&&t.orderInfo.status!==o.CANCELED&&t.orderInfo.status!==o.DELAY_CANCELED&&t.orderInfo.status!==o.COMMENTED))try{if(await J.confirm("删除将永久移除该订单及其相关信息，是否确定删除？","删除操作",{center:!0,confirmButtonText:"删 除",confirmButtonClass:"el-button--danger border-default shadow-sm",cancelButtonText:"取 消",lockScroll:!1})==="confirm"){y.value=!0;const{code:V}=await Es(c||t.orderInfo.id,r.getToken);y.value=!1,V===K.SUCCESS?(t.clearOrderItems(),t.status=o.DELETED,t.orderInfo.status=o.DELETED,Y.success({title:"删除提示",message:"订单和相关信息删除成功！"})):Y.error({title:"删除失败，请稍后再试！"})}}catch{y.value=!1}finally{y.value=!1}}function ft(c){C.value&&(m.value=c)}function _t(c){if(c===o.READY){if(S.value){Ce(),S.value=!1;return}J.alert("提交订单后便不可修改规格数量和优惠","注意",{confirmButtonText:"我已了解",lockScroll:!1,center:!0,callback:i=>{i==="confirm"&&(S.value=!0)}})}}function Ce(){const c=B.value.map(i=>({skuId:i.skuId,quantity:i.quantity,shopId:i.shopId,couponId:i.couponId,activityId:i.activityId}));t.$patch({pushOrderItems:c})}async function vt(){U.value||(U.value=!0,await a.resetRequestList(r.getToken),setTimeout(()=>{U.value=!1},300))}const $e=A(()=>{var c;return`${es} - ${(c=h.value)==null?void 0:c.banner}`});Gt({title:$e,meta:[{name:"description",content:$e}]});async function yt(){y.value||(y.value=!0,await t.reloadOrderInfo(t.orderId),setTimeout(()=>{ye.success("刷新成功！"),y.value=!1},300))}function ht(){history?history.length>1?history.back():me("/"):me("/")}return(c,i)=>{const V=We,P=Re,R=ts,X=Ge,ve=Qo,bt=Xs,gt=ds,Et=mo,Ae=Is,It=Eo,wt=Xt,kt=Ss,Le=ws,St=Co,Ne=Je,xt=qo,Dt=Qe,Ct=et,$t=Jo,Tt=Kt,At=Re,se=Fe,Lt=$s,Nt=Zt,Pt=Jt,Pe=be("auto-animate"),Ve=qe,Vt=be("copying");return l(),d("div",null,[v(Pt,{name:"second",header:!1,"left-menu":!1,footer:!1,menu:["back","home","service"]},{default:E(()=>[v(Nt,null,{default:E(()=>{var Ue,Oe;return[e(r).isLogin&&e(t).pushOrderItems.length>0?H((l(),d("div",ea,[s("div",ta,[s("div",sa,[v(P,{to:"/"},{default:E(()=>[v(V,{loading:"lazy",src:"/logo_title.png",alt:"Design by Kiwi2333 LOGO",class:"w-20vw md:w-10rem"})]),_:1}),v(R,{direction:"vertical",style:{"border-width":"2px","border-radius":"10px",margin:"0 1.4rem"}}),v(ve,{flex:"",style:{"font-weight":"700","font-size":"1.2rem"},type:(Ue=e(h))==null?void 0:Ue.type},{default:E(()=>{var _;return[p(n((_=e(h))==null?void 0:_.banner)+" ",1),e(t).status===e(o).UN_PAID?(l(),d("div",oa,[p(" ： "),v(X,{date:new Date(e(t).orderInfo.createTime)},null,8,["date"])])):w("",!0)]}),_:1},8,["type"])]),s("div",aa,[v(bt,{class:"group-hover:opacity-90 md:opacity-0",onReload:yt}),v(gt,{class:"mr-0 group-hover:opacity-90 md:opacity-0"})])]),H((l(),d("div",{class:"group flex flex-col overflow-hidden border-t-[var(--el-color-primary)] border-default dark:border-t-[var(--el-color-primary)] v-card","border-t":"0.5rem solid ",style:ie({borderTopColor:`var(--el-color-${e(h).type})`})},[e(t).status>e(o).READY?(l(),T(Et,{key:"OrderStatusSteps-list",class:"mt-2",active:e(t).status,date:e(t).orderInfo.createTime,color:(Oe=e(h))==null?void 0:Oe.type},null,8,["active","date","color"])):w("",!0),e(C)?(l(),d("div",la,[s("h4",ra,[p(" 收货地址： "),H(s("i",{"opacity-0":"","group-hover:opacity-100":"",class:"i-solar:refresh-outline float-right cursor-pointer bg-[var(--el-color-info)] px-3 transition-300 hover:rotate-180",onClick:vt},null,512),[[Z,e(C)]])]),v(R,{style:{margin:"0.7rem 0"},"opacity-40":""}),v(Le,{modelValue:e(m),"onUpdate:modelValue":i[0]||(i[0]=_=>te(m)?m.value=_:null),disabled:!e(S)},{default:E(()=>[v(kt,null,{default:E(()=>[H((l(),d("ul",na,[(l(!0),d(le,null,re(e(a).addressList,_=>(l(),T(It,{key:_.id,address:_,class:x(["w-220px flex-shrink-0 overflow-hidden opacity-80 transition-200 dark:opacity-70",_.id===e(m)?"border-[var(--el-color-primary)] dark:border-[var(--el-color-primary)]":""]),onClick:cl=>ft(_.id)},{btns:E(()=>[v(Ae,{label:_.id},null,8,["label"])]),_:2},1032,["address","class","onClick"]))),128)),v(P,{key:"/user/address",target:"_blank",to:"/user/address",class:"group relative mr-3 mt-2 min-h-160px w-240px flex flex-row-c-c flex-shrink-0 flex-col cursor-pointer border-2px rounded-6px rounded-8px p-3.4 leading-1.2em opacity-90 transition-300 hover:scale-96 border-default-dashed hover:border-solid"},{default:E(()=>[v(wt,{class:"h-4em w-4em opacity-40 transition-300"}),ia]),_:1})])),[[Pe,{duration:300,easing:"cubic-bezier(0.61, 0.225, 0.195, 1.3)"}]])]),_:1})]),_:1},8,["modelValue","disabled"])])):w("",!0)],4)),[[Ve,e(U)],[Pe]]),H(v(St,{class:"border-default v-card",address:e(t).orderInfo},null,8,["address"]),[[Z,e(t).status>e(o).READY]]),s("div",da,[s("h4",ca,[p(" 选购商品 "),e(t).status===e(o).READY?(l(),T(Ne,{key:0,class:"float-right ml-a cursor-pointer",plain:"",type:e(S)?"danger":"primary",szie:"small",onClick:i[1]||(i[1]=_=>_t(e(t).status))},{default:E(()=>[p(n(e(S)?"确定修改":"修改"),1)]),_:1},8,["type"])):w("",!0),v(R,{style:{margin:"0.7rem 0"},"opacity-40":""})]),(l(!0),d(le,null,re(e(B),_=>(l(),d("section",{key:_.id},[v(xt,{class:"mb-3",data:_,disable:!e(S)},{btn:E(()=>[]),_:2},1032,["data","disable"])]))),128))]),s("section",ua,[s("div",ma,[pa,v(Ct,{modelValue:e(L),"onUpdate:modelValue":i[2]||(i[2]=_=>te(L)?L.value=_:null),disabled:e($).length===0||!e(S),class:x(e($).length===0||!e(S)?"w-4.6rem":"w-1/5"),placeholder:e($).length?"选择代金卷":"暂无代金卷"},{default:E(()=>[(l(!0),d(le,null,re(e($),_=>(l(),T(Dt,{key:_,label:_,value:_},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled","class","placeholder"])]),v(R,{class:"opacity-40",style:{margin:"0.8em 0"}}),e(t).status===e(o).READY||e(t).status===e(o).UN_PAID?(l(),d("div",fa,[_a,e(r).userWallet.points>0?(l(),T($t,{key:0,modelValue:e(z),"onUpdate:modelValue":i[3]||(i[3]=_=>te(z)?z.value=_:null),"get-point-max":e(de),"get-final-price":e(ce)},null,8,["modelValue","get-point-max","get-final-price"])):(l(),d("small",va," 暂无积分 "))])):w("",!0)]),s("section",ya,[p(" 备注 "),s("div",ha,[e(t).status<e(o).DELIVERED?(l(),T(Tt,{key:0,modelValue:e(G),"onUpdate:modelValue":i[4]||(i[4]=_=>te(G)?G.value=_:null),modelModifiers:{lazy:!0},disabled:!e(C),class:"remark",type:"textarea",rows:"1",minlength:0,maxlength:40,placeholder:"给卖家的备注（选填）"},null,8,["modelValue","disabled"])):(l(),d("small",ba,n(e(t).orderInfo.remark||"暂无备注"),1))])]),e(t).orderInfo.status===e(o).UN_PAID?(l(),d("section",ga,[s("h4",Ea,[p(" 付款方式 "),v(R,{style:{margin:"0.7rem 0"},"opacity-40":""}),v(Le,{modelValue:e(I),"onUpdate:modelValue":i[5]||(i[5]=_=>te(I)?I.value=_:null),disable:!e(C)||!e(S),class:"pay-type-list w-full",style:{width:"100%"}},{default:E(()=>[(l(!0),d(le,null,re(e(f),_=>(l(),d("div",{key:_.type,class:"my-2.4 w-full flex-row-bt-c"},[s("div",Ia,[s("span",{class:"mr-4 inline-block h-2rem w-2rem",innerHTML:_.icon},null,8,wa),s("small",ka,[p(n(_.title)+" ",1),_!=null&&_.amount?(l(),d("span",Sa,"（剩余："+n(_==null?void 0:_.amount)+"）",1)):w("",!0)])]),_.disable?(l(),d("small",Da," 暂未开启 ")):(l(),d("div",xa,[v(Ae,{label:_.type,disable:_.disable},{default:E(()=>[p(n(""))]),_:2},1032,["label","disable"])]))]))),128))]),_:1},8,["modelValue","disable"])])])):w("",!0),e(t).status!==e(o).READY?(l(),d("section",Ca,[s("h4",$a,[p(" 订单信息 "),v(R,{style:{margin:"0.7rem 0"},"opacity-40":""})]),H((l(),d("small",Ta,[p(" 订单号 "),s("span",Aa,[p(n(e(t).orderInfo.id)+" ",1),La])])),[[Vt,e(t).orderInfo.id,void 0,{toast:!0}]]),H(s("small",Na,[p(" 支付时间 "),s("span",Pa,n(e(t).orderInfo.paidTime),1)],512),[[Z,e(t).orderInfo.paidTime]]),s("small",Va,[p(" 更新时间 "),s("span",Ua,n(e(t).orderInfo.updateTime),1)]),s("small",Oa,[p(" 下单时间 "),s("span",Ra,n(e(t).orderInfo.createTime),1)])])):w("",!0),s("section",Ba,[Ya,v(R,{style:{margin:"0.6rem 0"},"opacity-40":""}),s("small",Ma,[p(" 原总价 "),s("span",null,"￥"+n(e(q)),1)]),H(s("small",za,[p(" 优惠 "),s("strong",Ha,"-"+n(`￥${e(ue)}`),1)],512),[[Z,e(t).status>e(o).UN_PAID&&e(ue)!==0]]),s("small",Fa,[p(" 运费 "),s("span",null,n(e(O).value>0?`￥${e(O)}`:"￥0.00"),1)]),H(s("small",qa,[p(" 代金卷优惠 "),s("span",null,n(e($).length?e(L):0)+"元",1)],512),[[Z,e(L)!==""&&e(t).status<=e(o).UN_PAID]]),H(s("small",Wa,[p(" 积分抵扣 "),s("span",Ga," -"+n(`￥${e(W)(e(z)/100)}`),1)],512),[[Z,e(z)>0&&e(t).status<=e(o).UN_PAID]]),H(s("small",ja,[p(" 活动优惠 "),s("span",Xa," -"+n(`￥${e(W)(e(ee)/100)}`),1)],512),[[Z,e(ee)>0&&e(t).status<=e(o).UN_PAID]]),e(ue)?(l(),d("small",Ka,[p(" 减少 "),s("span",Za," -"+n(`￥${e(W)(e(t).orderInfo.totalPrice).subtract(e(t).orderInfo.spendPrice)}`),1)])):w("",!0),v(R,{style:{margin:"0.6rem 0"},"opacity-30":""}),s("div",Ja,[p(" 总计 "),s("h3",Qa,[p(" ￥ "),s("strong",el,n(e(ue)?e(W)(e(t).orderInfo.spendPrice):e(ce)),1)])])]),s("section",tl,[s("div",sl,[v(Ne,null,{default:E(()=>[ol,v(At,{to:"/chat?type=service",class:"hidden md:inline"},{default:E(()=>[p(" 客服 ")]),_:1})]),_:1})]),s("div",al,[ll,s("div",rl,[e(t).status===e(o).UN_PAID?(l(),T(se,{key:0,size:"default",plain:"",onClick:i[6]||(i[6]=_=>nt(e(t).orderId))},{default:E(()=>[p(" 取消订单 ")]),_:1})):w("",!0),e(t).orderInfo.status===e(o).REFUND_SUCCESS||e(t).orderInfo.status===e(o).CANCELED||e(t).orderInfo.status===e(o).DELAY_CANCELED||e(t).orderInfo.status===e(o).COMMENTED?(l(),T(se,{key:1,type:"danger",plain:"",onClick:i[7]||(i[7]=_=>pt(e(t).orderId))},{default:E(()=>[p(" 删除订单 ")]),_:1})):w("",!0),e(t).status===e(o).UN_PAID||e(t).status===e(o).PAID?(l(),T(se,{key:2,size:"default",type:e(C)?"danger":"",plain:"",onClick:i[8]||(i[8]=_=>C.value=!e(C))},{default:E(()=>[p(n(e(C)?"取消修改":"修改订单"),1)]),_:1},8,["type"])):w("",!0),e(t).status===e(o).PAID||e(t).status===e(o).RECEIVED||e(t).status===e(o).DELIVERED?(l(),T(se,{key:3,size:"default",type:"danger",plain:"",onClick:i[9]||(i[9]=_=>dt(e(t).orderId))},{default:E(()=>[p(" 申请退款 ")]),_:1})):w("",!0)]),e(h).submitText?(l(),T(se,{key:0,size:"default","min-w-8em":"","shadow-md":"",style:{"font-weight":"600"},type:e(h).btnType||"primary",onClick:i[10]||(i[10]=_=>e(C)&&e(t).status!==e(o).READY?it(e(t).orderInfo.id):k(e(t).status))},{default:E(()=>[p(n(e(C)&&e(t).status!==e(o).READY?"确 认":e(h).submitText),1)]),_:1},8,["type"])):w("",!0)])])])),[[Ve,e(y),void 0,{fullscreen:!0,lock:!0}]]):(l(),d("div",nl,[v(Lt,{description:" "},{default:E(()=>[il,v(se,{type:"primary",onClick:ht},{default:E(()=>[p(" 返 回 ")]),_:1})]),_:1})]))]}),_:1})]),_:1})])}}}),Gl=_e(dl,[["__scopeId","data-v-c39435a3"]]);export{Gl as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index.2AyaIaz8.js","./entry.HuYbGiLS.js","./swiper-vue.4ZhlhtKr.js","./swiper-vue.CRufKKKm.css","./entry.NyAeeWMW.css","./index.l5CC8IXT.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
