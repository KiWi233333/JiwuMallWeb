import{O as o,g as p}from"./index.xV7eTSBk.js";import{go as v,u as f,S as I,G as P}from"./entry.HuYbGiLS.js";import{a as t,b as S}from"./swiper-vue.4ZhlhtKr.js";const C=v("order",()=>{const d=t({id:"",userId:"",status:o.READY,name:"",province:"",city:"",county:"",address:"",postalCode:"",phone:"",remark:"",spendPrice:0,totalPrice:0,paidTime:"",createTime:"",updateTime:"",ordersItems:[]}),r=t(""),i=t(""),s=t({}),u=t(o.READY),c=t([]),n=()=>{r.value="",i.value="",u.value=o.READY,d.value={id:"",userId:"",status:o.READY,name:"",province:"",city:"",county:"",address:"",postalCode:"",phone:"",remark:"",spendPrice:0,totalPrice:0,paidTime:"",createTime:"",updateTime:"",ordersItems:[]},s.value={},c.value.splice(0)},l=async a=>{if(!a&&r.value==="")return;const{data:e,code:m}=await p(a||r.value,f().getToken);m===I.SUCCESS?(d.value=e,r.value=e==null?void 0:e.id,u.value=e.status,s.value.reducePrice=P(e.totalPrice).subtract(e.spendPrice).value,s.value.finalPrice=e.spendPrice):n()};return S(r,async a=>{a&&await l()},{immediate:!0,deep:!0}),{orderInfo:d,orderId:r,status:u,addressId:i,pushOrderItems:c,unPaidVO:s,clearOrderItems:n,reloadOrderInfo:l}},{persist:!0});export{C as u};
